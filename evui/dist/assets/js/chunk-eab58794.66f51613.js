(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eab58794"],{"2a6c":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ele-body"},[a("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:15}},[a("el-col",{attrs:{span:6}},[a("stat-card",{attrs:{title:"订单总数",value:t.total,icon:"el-icon-s-order",color:"primary",loading:t.loading,"help-text":"当前筛选结果"}})],1),a("el-col",{attrs:{span:6}},[a("stat-card",{attrs:{title:"已成交",value:t.stats.filled,icon:"el-icon-circle-check",color:"success",loading:t.loading}})],1),a("el-col",{attrs:{span:6}},[a("stat-card",{attrs:{title:"已取消/拒绝",value:t.stats.cancelled,icon:"el-icon-remove-outline",color:"info",loading:t.loading}})],1),a("el-col",{attrs:{span:6}},[a("stat-card",{attrs:{title:"待处理/部分",value:t.stats.pending,icon:"el-icon-time",color:"warning",loading:t.loading}})],1)],1),a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"toolbar"},[a("span",{staticClass:"toolbar-title"},[t._v("订单列表")]),a("el-button",{attrs:{size:"small",icon:"el-icon-refresh",loading:t.loading},on:{click:t.fetchData}},[t._v("刷新")])],1),a("div",{staticClass:"search-bar"},[a("el-form",{attrs:{inline:!0,model:t.where,size:"small"}},[a("el-form-item",{attrs:{label:"标的"}},[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"如 BTC/USDT",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)}},model:{value:t.where.symbol,callback:function(e){t.$set(t.where,"symbol",e)},expression:"where.symbol"}})],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"全部",clearable:""},model:{value:t.where.status,callback:function(e){t.$set(t.where,"status",e)},expression:"where.status"}},[a("el-option",{attrs:{label:"PENDING",value:"PENDING"}}),a("el-option",{attrs:{label:"FILLED",value:"FILLED"}}),a("el-option",{attrs:{label:"CANCELLED",value:"CANCELLED"}}),a("el-option",{attrs:{label:"REJECTED",value:"REJECTED"}}),a("el-option",{attrs:{label:"PARTIAL",value:"PARTIAL"}})],1)],1),a("el-form-item",{attrs:{label:"方向"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"全部",clearable:""},model:{value:t.where.side,callback:function(e){t.$set(t.where,"side",e)},expression:"where.side"}},[a("el-option",{attrs:{label:"买入",value:"buy"}}),a("el-option",{attrs:{label:"卖出",value:"sell"}})],1)],1),a("el-form-item",{attrs:{label:"日期范围"}},[a("el-date-picker",{staticStyle:{width:"240px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始","end-placeholder":"结束","value-format":"yyyy-MM-dd"},model:{value:t.where.dateRange,callback:function(e){t.$set(t.where,"dateRange",e)},expression:"where.dateRange"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSearch}},[t._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"12px"},attrs:{data:t.list,stripe:"",border:"",size:"small","header-cell-style":{background:"#fafafa"}}},[a("el-table-column",{attrs:{prop:"order_id",label:"订单ID",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",{attrs:{title:l.order_id}},[t._v(t._s(t.truncateId(l.order_id)))])]}}])}),a("el-table-column",{attrs:{prop:"symbol",label:"标的",width:"110"}}),a("el-table-column",{attrs:{prop:"exchange",label:"交易所",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",{attrs:{size:"mini"}},[t._v(t._s(l.exchange))])]}}])}),a("el-table-column",{attrs:{prop:"side",label:"方向",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",{attrs:{type:"buy"===l.side||"BUY"===l.side?"success":"danger",size:"mini"}},[t._v(" "+t._s("buy"===l.side||"BUY"===l.side?"买入":"卖出")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"order_type",label:"类型",width:"80"}}),a("el-table-column",{attrs:{prop:"quantity",label:"数量",width:"100",align:"right"}}),a("el-table-column",{attrs:{prop:"filled_quantity",label:"已成交",width:"100",align:"right"}}),a("el-table-column",{attrs:{prop:"price",label:"价格",width:"100",align:"right"}}),a("el-table-column",{attrs:{prop:"avg_price",label:"均价",width:"100",align:"right"}}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",{attrs:{type:t.statusType(l.status),size:"mini"}},[t._v(t._s(l.status))])]}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间","min-width":"170"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.formatTime(a.created_at)))]}}])})],1),t.loading||0!==t.list.length?t._e():a("el-empty",{attrs:{description:"暂无订单"}}),t.total>0?a("div",{staticClass:"pagination-wrap"},[a("span",{staticClass:"total-tip"},[t._v("共 "+t._s(t.total)+" 条")]),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes",total:t.total,"page-sizes":[10,20,50,100],"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"size-change":t.fetchData,"current-change":t.fetchData}})],1):t._e()],1)],1)},r=[],s=(a("0643"),a("4e3e"),a("8012")),n={name:"OrderList",data(){return{loading:!1,list:[],total:0,currentPage:1,pageSize:20,where:{symbol:"",status:"",side:"",dateRange:null}}},computed:{stats(){const t={filled:0,cancelled:0,pending:0};return this.list.forEach(e=>{const a=(e.status||"").toUpperCase();"FILLED"===a?t.filled++:"CANCELLED"===a||"REJECTED"===a?t.cancelled++:t.pending++}),t}},mounted(){this.fetchData()},methods:{formatTime(t){return t?String(t).replace("T"," ").substring(0,19):"-"},truncateId(t){if(!t)return"-";const e=String(t);return e.length<=12?e:e.slice(0,8)+"..."+e.slice(-4)},statusType(t){const e={PENDING:"warning",FILLED:"success",CANCELLED:"info",REJECTED:"danger",PARTIAL:"warning"};return e[(t||"").toUpperCase()]||"info"},onSearch(){this.currentPage=1,this.fetchData()},reset(){this.where={symbol:"",status:"",side:"",dateRange:null},this.currentPage=1,this.fetchData()},async fetchData(){this.loading=!0;try{const t={limit:this.pageSize,offset:(this.currentPage-1)*this.pageSize};this.where.symbol&&(t.symbol=this.where.symbol),this.where.status&&(t.status=this.where.status),this.where.side&&(t.side=this.where.side),this.where.dateRange&&2===this.where.dateRange.length&&(t.start_time=this.where.dateRange[0]+"T00:00:00",t.end_time=this.where.dateRange[1]+"T23:59:59");const e=await Object(s["c"])(t),a=e.data;this.list=a.data||[],this.total=null!=a.total?a.total:this.list.length}catch(e){var t;this.$message.error((null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.detail)||"获取订单失败"),this.list=[],this.total=0}finally{this.loading=!1}}}},i=n,o=(a("fe18"),a("2877")),c=Object(o["a"])(i,l,r,!1,null,"d5152f9e",null);e["default"]=c.exports},8012:function(t,e,a){"use strict";a.d(e,"c",(function(){return i})),a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return u})),a.d(e,"e",(function(){return d}));var l=a("bc3a"),r=a.n(l);let s={tenant_id:1};function n(t){return{...s,...t}}function i(t={}){return r.a.get("/orders",{params:n({limit:50,...t})})}function o(t={}){return r.a.get("/fills",{params:n({limit:50,...t})})}function c(t={}){return r.a.get("/positions",{params:n({limit:100,...t})})}function u(t={}){return r.a.get("/accounts",{params:n({limit:50,...t})})}function d(t={}){return r.a.get("/transactions",{params:n({limit:50,...t})})}},"906b":function(t,e,a){},fe18:function(t,e,a){"use strict";a("906b")}}]);