(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-00e45b1b"],{"35ae":function(t,e,n){"use strict";n("50a6")},"50a6":function(t,e,n){},"50fc":function(t,e,n){"use strict";n.d(e,"v",(function(){return o})),n.d(e,"h",(function(){return r})),n.d(e,"K",(function(){return s})),n.d(e,"F",(function(){return l})),n.d(e,"z",(function(){return c})),n.d(e,"b",(function(){return u})),n.d(e,"u",(function(){return d})),n.d(e,"i",(function(){return h})),n.d(e,"L",(function(){return p})),n.d(e,"d",(function(){return f})),n.d(e,"l",(function(){return g})),n.d(e,"y",(function(){return m})),n.d(e,"w",(function(){return v})),n.d(e,"A",(function(){return y})),n.d(e,"x",(function(){return _})),n.d(e,"C",(function(){return b})),n.d(e,"G",(function(){return x})),n.d(e,"m",(function(){return w})),n.d(e,"e",(function(){return M})),n.d(e,"H",(function(){return O})),n.d(e,"D",(function(){return S})),n.d(e,"B",(function(){return j})),n.d(e,"s",(function(){return C})),n.d(e,"t",(function(){return A})),n.d(e,"g",(function(){return D})),n.d(e,"J",(function(){return I})),n.d(e,"k",(function(){return R})),n.d(e,"E",(function(){return P})),n.d(e,"o",(function(){return z})),n.d(e,"n",(function(){return L})),n.d(e,"f",(function(){return T})),n.d(e,"I",(function(){return k})),n.d(e,"j",(function(){return Z})),n.d(e,"p",(function(){return B})),n.d(e,"a",(function(){return V})),n.d(e,"c",(function(){return E})),n.d(e,"q",(function(){return W})),n.d(e,"r",(function(){return H}));var a=n("bc3a"),i=n.n(a);function o(t={}){return i.a.get("/tenants",{params:t})}function r(t){return i.a.post("/tenants",t)}function s(t,e){return i.a.put("/tenants/"+t,e)}function l(t){return i.a.patch(`/tenants/${t}/toggle`)}function c(t,e){return i.a.post(`/tenants/${t}/recharge`,e)}function u(t,e){return i.a.post(`/tenants/${t}/assign-plan`,{plan_id:e})}function d(t,e={}){return i.a.get(`/tenants/${t}/tenant-strategies`,{params:e})}function h(t,e){return i.a.post(`/tenants/${t}/tenant-strategies`,e)}function p(t,e,n){return i.a.put(`/tenants/${t}/tenant-strategies/${e}`,n)}function f(t,e){return i.a.post(`/tenants/${t}/tenant-strategies/${e}/copy-from-master`)}function g(t,e){return i.a.delete(`/tenants/${t}/tenant-strategies/${e}`)}function m(t={}){return i.a.get("/users",{params:t})}function v(t){return i.a.get("/users/"+t)}function y(t,e){return i.a.post(`/users/${t}/recharge`,e)}function _(t,e={}){return i.a.get(`/users/${t}/team`,{params:e})}function b(t,e){return i.a.post(`/users/${t}/set-market-node`,e)}function x(t,e){return i.a.post(`/users/${t}/toggle-status`,{status:e})}function w(t={}){return i.a.get("/admins",{params:t})}function M(t){return i.a.post("/admins",t)}function O(t,e){return i.a.put("/admins/"+t,e)}function S(t){return i.a.patch(`/admins/${t}/toggle`)}function j(t,e){return i.a.post(`/admins/${t}/reset-password`,e)}function C(t={}){return i.a.get("/strategies",{params:t})}function A(t){return i.a.get("/strategies/"+t)}function D(t){return i.a.post("/strategies",t)}function I(t,e){return i.a.post("/strategies/"+t,e)}function R(t){return i.a.delete("/strategies/"+t)}function P(t){return i.a.patch(`/strategies/${t}/toggle`)}function z(t={}){return i.a.get("/strategy-bindings-admin",{params:t})}function L(){return i.a.get("/strategy-bindings-admin/form-options")}function T(t){return i.a.post("/strategy-bindings-admin",t)}function k(t,e){return i.a.put("/strategy-bindings-admin/"+t,e)}function Z(t){return i.a.delete("/strategy-bindings-admin/"+t)}function B(t={}){return i.a.get("/exchange-accounts",{params:t})}function V(t,e){return i.a.put(`/exchange-accounts/${t}/assign-node`,e)}function E(t){return i.a.post("/exchange-accounts/batch-assign-node",t)}function W(t={}){return i.a.get("/signal-events",{params:t})}function H(){return i.a.get("/signal-events/strategies")}},a1f5:function(t,e,n){"use strict";n.r(e);var a={};n.r(a),n.d(a,"extendShape",(function(){return c["extendShape"]})),n.d(a,"extendPath",(function(){return c["extendPath"]})),n.d(a,"makePath",(function(){return c["makePath"]})),n.d(a,"makeImage",(function(){return c["makeImage"]})),n.d(a,"mergePath",(function(){return c["mergePath"]})),n.d(a,"resizePath",(function(){return c["resizePath"]})),n.d(a,"createIcon",(function(){return c["createIcon"]})),n.d(a,"updateProps",(function(){return c["updateProps"]})),n.d(a,"initProps",(function(){return c["initProps"]})),n.d(a,"getTransform",(function(){return c["getTransform"]})),n.d(a,"clipPointsByRect",(function(){return c["clipPointsByRect"]})),n.d(a,"clipRectByRect",(function(){return c["clipRectByRect"]})),n.d(a,"registerShape",(function(){return c["registerShape"]})),n.d(a,"getShapeClass",(function(){return c["getShapeClass"]})),n.d(a,"Group",(function(){return u["a"]})),n.d(a,"Image",(function(){return d["a"]})),n.d(a,"Text",(function(){return h["a"]})),n.d(a,"Circle",(function(){return p["a"]})),n.d(a,"Ellipse",(function(){return f["a"]})),n.d(a,"Sector",(function(){return g["a"]})),n.d(a,"Ring",(function(){return m["a"]})),n.d(a,"Polygon",(function(){return v["a"]})),n.d(a,"Polyline",(function(){return y["a"]})),n.d(a,"Rect",(function(){return _["a"]})),n.d(a,"Line",(function(){return b["a"]})),n.d(a,"BezierCurve",(function(){return x["a"]})),n.d(a,"Arc",(function(){return w["a"]})),n.d(a,"IncrementalDisplayable",(function(){return M["a"]})),n.d(a,"CompoundPath",(function(){return O["a"]})),n.d(a,"LinearGradient",(function(){return S["a"]})),n.d(a,"RadialGradient",(function(){return j["a"]})),n.d(a,"BoundingRect",(function(){return C["a"]}));var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ele-body"},[n("el-card",{staticStyle:{"margin-bottom":"15px"},attrs:{shadow:"never"}},[n("el-form",{attrs:{inline:!0,size:"small"}},[n("el-form-item",{attrs:{label:"选择账户"}},[n("el-select",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择交易账户",loading:t.accountsLoading},on:{change:t.handleAccountChange},model:{value:t.accountId,callback:function(e){t.accountId=e},expression:"accountId"}},t._l(t.accounts,(function(t){return n("el-option",{key:t.id,attrs:{label:"#"+t.id+" "+(t.user_email?t.user_email+" - ":"")+t.exchange+" ("+t.account_type+")",value:t.id}})})),1)],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",disabled:!t.accountId},on:{click:t.fetchAll}},[t._v("刷新数据")])],1)],1)],1),t.accountId||t.accountsLoading?t._e():n("div",[n("el-empty",{attrs:{description:"请先选择一个交易账户以查看分析数据"}})],1),t.accountId?n("div",[n("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:15}},[n("el-col",{attrs:{lg:4,md:8,sm:12,xs:24}},[n("stat-card",{attrs:{title:"当前权益",value:t.performanceData.current_equity||0,icon:"el-icon-wallet",color:"primary",format:"money",precision:2,"help-text":"账户当前总权益",loading:t.loading}})],1),n("el-col",{attrs:{lg:4,md:8,sm:12,xs:24}},[n("stat-card",{attrs:{title:"累计收益率",value:100*(t.performanceData.total_return||0),icon:"el-icon-trophy",color:"success",format:"percent",precision:2,"help-text":"累计总收益率",loading:t.loading}},[n("template",{slot:"value"},[n("span",{style:{color:(t.performanceData.total_return||0)>=0?"#67C23A":"#F56C6C"}},[t._v(" "+t._s(t.formatPercent(t.performanceData.total_return))+" ")])])],2)],1),n("el-col",{attrs:{lg:4,md:8,sm:12,xs:24}},[n("stat-card",{attrs:{title:"日盈亏",value:t.performanceData.daily_pnl||0,icon:"el-icon-coin",color:"warning",format:"money",precision:2,"help-text":"当日盈亏金额",loading:t.loading}},[n("template",{slot:"value"},[n("span",{style:{color:(t.performanceData.daily_pnl||0)>=0?"#67C23A":"#F56C6C"}},[t._v(" "+t._s(t.formatMoney(t.performanceData.daily_pnl))+" ")])])],2)],1),n("el-col",{attrs:{lg:4,md:8,sm:12,xs:24}},[n("stat-card",{attrs:{title:"夏普比率",value:t.performanceData.sharpe_ratio||0,icon:"el-icon-data-line",color:"info",format:"number",precision:2,"help-text":"风险调整后收益指标",loading:t.loading}})],1),n("el-col",{attrs:{lg:4,md:8,sm:12,xs:24}},[n("stat-card",{attrs:{title:"最大回撤",value:100*(t.riskData.max_drawdown||0),icon:"el-icon-bottom",color:"danger",format:"percent",precision:2,"help-text":"历史最大回撤幅度",loading:t.riskLoading}})],1),n("el-col",{attrs:{lg:4,md:8,sm:12,xs:24}},[n("stat-card",{attrs:{title:"胜率",value:100*(t.performanceData.win_rate||0),icon:"el-icon-success",color:"success",format:"percent",precision:1,"help-text":"盈利交易占比",loading:t.loading}})],1)],1),n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.curveLoading,expression:"curveLoading"}],staticStyle:{"margin-top":"16px"},attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[n("span",[t._v("权益曲线")]),n("el-date-picker",{staticStyle:{"margin-left":"16px",width:"260px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始","end-placeholder":"结束","value-format":"yyyy-MM-dd",size:"mini"},on:{change:t.fetchEquityCurve},model:{value:t.curveDateRange,callback:function(e){t.curveDateRange=e},expression:"curveDateRange"}})],1),n("div",{ref:"equityChart",staticStyle:{width:"100%",height:"320px"}}),t.curveLoading||0!==t.equityCurve.length?t._e():n("el-empty",{attrs:{description:"暂无净值数据，请确认日期范围"}})],1),n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"16px"},attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[t._v("绩效汇总")]),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:8}},[n("div",{staticClass:"metric-item"},[n("div",{staticClass:"metric-label"},[t._v("盈利因子")]),n("div",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(t.performanceData.profit_factor)))])])]),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"metric-item"},[n("div",{staticClass:"metric-label"},[t._v("平均交易盈亏")]),n("div",{staticClass:"metric-value"},[t._v(t._s(t.formatMoney(t.performanceData.avg_trade_pnl)))])])]),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"metric-item"},[n("div",{staticClass:"metric-label"},[t._v("总交易次数")]),n("div",{staticClass:"metric-value"},[t._v(t._s(t.performanceData.total_trades||0))])])])],1)],1),n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.riskLoading,expression:"riskLoading"}],staticStyle:{"margin-top":"16px"},attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[t._v("风险指标")]),n("el-row",{attrs:{gutter:20}},[n("el-col",{attrs:{span:6}},[n("div",{staticClass:"metric-item"},[n("div",{staticClass:"metric-label"},[t._v("最大回撤")]),n("div",{staticClass:"metric-value"},[t._v(t._s(t.formatPercent(t.riskData.max_drawdown)))])])]),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"metric-item"},[n("div",{staticClass:"metric-label"},[t._v("VaR (95%)")]),n("div",{staticClass:"metric-value"},[t._v(t._s(t.formatMoney(t.riskData.var_95)))])])]),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"metric-item"},[n("div",{staticClass:"metric-label"},[t._v("波动率")]),n("div",{staticClass:"metric-value"},[t._v(t._s(t.formatPercent(t.riskData.volatility)))])])]),n("el-col",{attrs:{span:6}},[n("div",{staticClass:"metric-item"},[n("div",{staticClass:"metric-label"},[t._v("风险等级")]),n("div",{staticClass:"metric-value"},[n("el-tag",{attrs:{type:t.getRiskTagType(t.riskData.risk_level),size:"small"}},[t._v(t._s(t.riskData.risk_level||"-"))])],1)])]),n("el-col",{staticStyle:{"margin-top":"16px"},attrs:{span:6}},[n("div",{staticClass:"metric-item"},[n("div",{staticClass:"metric-label"},[t._v("当前回撤")]),n("div",{staticClass:"metric-value"},[t._v(t._s(t.formatPercent(t.riskData.current_drawdown)))])])])],1)],1),n("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.statsLoading,expression:"statsLoading"}],staticStyle:{"margin-top":"16px"},attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[t._v("交易统计")]),n("el-table",{attrs:{data:t.statsList,stripe:"",border:"",size:"small","header-cell-style":{background:"#fafafa"}}},[n("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),n("el-table-column",{attrs:{prop:"symbol",label:"交易对",width:"150"}}),n("el-table-column",{attrs:{prop:"trades",label:"交易次数",width:"100",align:"right"}}),n("el-table-column",{attrs:{prop:"pnl",label:"盈亏",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",{style:{color:(a.pnl||0)>=0?"#67C23A":"#F56C6C"}},[t._v(t._s(t.formatMoney(a.pnl)))])]}}],null,!1,49422115)}),n("el-table-column",{attrs:{prop:"win_rate",label:"胜率",width:"100",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(t._s(t.formatPercent(n.win_rate)))]}}],null,!1,1673384875)}),n("el-table-column",{attrs:{prop:"volume",label:"成交量",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(t._s(t.formatMoney(n.volume)))]}}],null,!1,2333790821)}),n("el-table-column",{attrs:{prop:"fees",label:"手续费",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(t._s(t.formatMoney(n.fees)))]}}],null,!1,360546712)})],1),t.statsLoading||0!==t.statsList.length?t._e():n("el-empty",{attrs:{description:"暂无统计数据"}})],1)],1):t._e()],1)},o=[],r=(n("0643"),n("2382"),n("a573"),n("1be7")),s=n("6cb7"),l=n("b12f"),c=(n("4f85"),n("e887"),n("2306")),u=n("2dc5"),d=n("0da8"),h=n("76a5"),p=n("d9fc"),f=n("ae69"),g=n("4aa2"),m=n("4573"),v=n("87b1"),y=n("d498"),_=n("c7a2"),b=n("cb11"),x=n("ac0f"),w=n("8d32"),M=n("392f"),O=n("d4c6"),S=n("48a9"),j=n("dded"),C=n("9850");var A=n("22b4"),D=n("f95e"),I=n("9ab4"),R=n("07fd"),P=n("f72b"),z=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return Object(I["b"])(e,t),e.prototype.init=function(e,n,a){t.prototype.init.call(this,e,n,a),this._sourceManager=new P["a"](this),Object(P["b"])(this)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),Object(P["b"])(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:R["a"]},e}(s["a"]),L=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return Object(I["b"])(e,t),e.type="dataset",e}(l["a"]);function T(t){t.registerComponentModel(z),t.registerComponentView(L)}Object(A["a"])([D["a"],T]);var k=n("3620");Object(A["a"])(k["a"]);var Z=n("2da7");Object(A["a"])(Z["a"]);var B=n("4b2a");Object(A["a"])(B["a"]);var V=n("6d8b"),E=["x","y","radius","angle","single"],W=["cartesian2d","polar","singleAxis"];function H(t){var e=t.get("coordinateSystem");return Object(V["p"])(W,e)>=0}function N(t){return t+"Axis"}function F(t,e){var n,a=Object(V["f"])(),i=[],o=Object(V["f"])();t.eachComponent({mainType:"dataZoom",query:e},(function(t){o.get(t.uid)||s(t)}));do{n=!1,t.eachComponent("dataZoom",r)}while(n);function r(t){!o.get(t.uid)&&l(t)&&(s(t),n=!0)}function s(t){o.set(t.uid,!0),i.push(t),c(t)}function l(t){var e=!1;return t.eachTargetAxis((function(t,n){var i=a.get(t);i&&i[n]&&(e=!0)})),e}function c(t){t.eachTargetAxis((function(t,e){(a.get(t)||a.set(t,[]))[e]=!0}))}return i}function $(t){var e=t.ecModel,n={infoList:[],infoMap:Object(V["f"])()};return t.eachTargetAxis((function(t,a){var i=e.getComponent(N(t),a);if(i){var o=i.getCoordSysModel();if(o){var r=o.uid,s=n.infoMap.get(r);s||(s={model:o,axisModels:[]},n.infoList.push(s),n.infoMap.set(r,s)),s.axisModels.push(i)}}})),n}var Y=n("e0d3"),q=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},t}(),X=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return Object(I["b"])(e,t),e.prototype.init=function(t,e,n){var a=G(t);this.settledOption=a,this.mergeDefaultAndTheme(t,n),this._doInit(a)},e.prototype.mergeOption=function(t){var e=G(t);Object(V["F"])(this.option,t,!0),Object(V["F"])(this.settledOption,e,!0),this._doInit(e)},e.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;Object(V["j"])([["start","startValue"],["end","endValue"]],(function(t,a){"value"===this._rangePropMode[a]&&(e[t[0]]=n[t[0]]=null)}),this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=Object(V["f"])(),n=this._fillSpecifiedTargetAxis(e);n?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each((function(t){t.indexList.length&&(this._noTarget=!1)}),this)},e.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return Object(V["j"])(E,(function(n){var a=this.getReferringComponents(N(n),Y["a"]);if(a.specified){e=!0;var i=new q;Object(V["j"])(a.models,(function(t){i.add(t.componentIndex)})),t.set(n,i)}}),this),e},e.prototype._fillAutoTargetAxisByOrient=function(t,e){var n=this.ecModel,a=!0;if(a){var i="vertical"===e?"y":"x",o=n.findComponents({mainType:i+"Axis"});r(o,i)}if(a){o=n.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===e}});r(o,"single")}function r(e,n){var i=e[0];if(i){var o=new q;if(o.add(i.componentIndex),t.set(n,o),a=!1,"x"===n||"y"===n){var r=i.getReferringComponents("grid",Y["b"]).models[0];r&&Object(V["j"])(e,(function(t){i.componentIndex!==t.componentIndex&&r===t.getReferringComponents("grid",Y["b"]).models[0]&&o.add(t.componentIndex)}))}}}a&&Object(V["j"])(E,(function(e){if(a){var i=n.findComponents({mainType:N(e),filter:function(t){return"category"===t.get("type",!0)}});if(i[0]){var o=new q;o.add(i[0].componentIndex),t.set(e,o),a=!1}}}),this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis((function(e){!t&&(t=e)}),this),"y"===t?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var e=this._rangePropMode,n=this.get("rangeMode");Object(V["j"])([["start","startValue"],["end","endValue"]],(function(a,i){var o=null!=t[a[0]],r=null!=t[a[1]];o&&!r?e[i]="percent":!o&&r?e[i]="value":n?e[i]=n[i]:o&&(e[i]="percent")}))},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis((function(e,n){null==t&&(t=this.ecModel.getComponent(N(e),n))}),this),t},e.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each((function(n,a){Object(V["j"])(n.indexList,(function(n){t.call(e,a,n)}))}))},e.prototype.getAxisProxy=function(t,e){var n=this.getAxisModel(t,e);if(n)return n.__dzAxisProxy},e.prototype.getAxisModel=function(t,e){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[e])return this.ecModel.getComponent(N(t),e)},e.prototype.setRawRange=function(t){var e=this.option,n=this.settledOption;Object(V["j"])([["start","startValue"],["end","endValue"]],(function(a){null==t[a[0]]&&null==t[a[1]]||(e[a[0]]=n[a[0]]=t[a[0]],e[a[1]]=n[a[1]]=t[a[1]])}),this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var e=this.option;Object(V["j"])(["start","startValue","end","endValue"],(function(n){e[n]=t[n]}))},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,n=this._targetAxisInfoMap.keys(),a=0;a<n.length;a++)for(var i=n[a],o=this._targetAxisInfoMap.get(i),r=0;r<o.indexList.length;r++){var s=this.getAxisProxy(i,o.indexList[r]);if(s.hostedBy(this))return s;e||(e=s)}return e},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={zlevel:0,z:4,filterMode:"filter",start:0,end:100},e}(s["a"]);function G(t){var e={};return Object(V["j"])(["start","end","startValue","endValue","throttle"],(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])})),e}var U=X,K=n("8918"),J=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(I["b"])(e,t),e.type="dataZoom.inside",e.defaultOption=Object(K["d"])(U.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(U),Q=J,tt=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(I["b"])(e,t),e.prototype.render=function(t,e,n,a){this.dataZoomModel=t,this.ecModel=e,this.api=n},e.type="dataZoom",e}(l["a"]),et=tt;function nt(t,e,n,a,i,o){t=t||0;var r=n[1]-n[0];if(null!=i&&(i=it(i,[0,r])),null!=o&&(o=Math.max(o,null!=i?i:0)),"all"===a){var s=Math.abs(e[1]-e[0]);s=it(s,[0,r]),i=o=it(s,[i,o]),a=0}e[0]=it(e[0],n),e[1]=it(e[1],n);var l=at(e,a);e[a]+=t;var c,u=i||0,d=n.slice();return l.sign<0?d[0]+=u:d[1]-=u,e[a]=it(e[a],d),c=at(e,a),null!=i&&(c.sign!==l.sign||c.span<i)&&(e[1-a]=e[a]+l.sign*i),c=at(e,a),null!=o&&c.span>o&&(e[1-a]=e[a]+c.sign*o),e}function at(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function it(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}var ot=n("6fd3"),rt=n("607d"),st="\0_ec_interaction_mutex";function lt(t,e){return!!ct(t)[e]}function ct(t){return t[st]||(t[st]={})}r["c"]({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},(function(){}));var ut=function(t){function e(e){var n=t.call(this)||this;n._zr=e;var a=Object(V["c"])(n._mousedownHandler,n),i=Object(V["c"])(n._mousemoveHandler,n),o=Object(V["c"])(n._mouseupHandler,n),r=Object(V["c"])(n._mousewheelHandler,n),s=Object(V["c"])(n._pinchHandler,n);return n.enable=function(t,n){this.disable(),this._opt=Object(V["i"])(Object(V["d"])(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",a),e.on("mousemove",i),e.on("mouseup",o)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",r),e.on("pinch",s))},n.disable=function(){e.off("mousedown",a),e.off("mousemove",i),e.off("mouseup",o),e.off("mousewheel",r),e.off("pinch",s)},n}return Object(I["b"])(e,t),e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!(rt["d"](t)||t.target&&t.target.draggable)){var e=t.offsetX,n=t.offsetY;this.pointerChecker&&this.pointerChecker(t,e,n)&&(this._x=e,this._y=n,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(this._dragging&&pt("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!lt(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,a=this._x,i=this._y,o=e-a,r=n-i;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&rt["g"](t.event),ht(this,"pan","moveOnMouseMove",t,{dx:o,dy:r,oldX:a,oldY:i,newX:e,newY:n,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){rt["d"](t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var e=pt("zoomOnMouseWheel",t,this._opt),n=pt("moveOnMouseWheel",t,this._opt),a=t.wheelDelta,i=Math.abs(a),o=t.offsetX,r=t.offsetY;if(0!==a&&(e||n)){if(e){var s=i>3?1.4:i>1?1.2:1.1,l=a>0?s:1/s;dt(this,"zoom","zoomOnMouseWheel",t,{scale:l,originX:o,originY:r,isAvailableBehavior:null})}if(n){var c=Math.abs(a),u=(a>0?1:-1)*(c>3?.4:c>1?.15:.05);dt(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:u,originX:o,originY:r,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){if(!lt(this._zr,"globalPan")){var e=t.pinchScale>1?1.1:1/1.1;dt(this,"zoom",null,t,{scale:e,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})}},e}(ot["a"]);function dt(t,e,n,a,i){t.pointerChecker&&t.pointerChecker(a,i.originX,i.originY)&&(rt["g"](a.event),ht(t,e,n,a,i))}function ht(t,e,n,a,i){i.isAvailableBehavior=Object(V["c"])(pt,null,n,a),t.trigger(e,i)}function pt(t,e,n){var a=n[t];return!t||a&&(!Object(V["z"])(a)||e.event[a+"Key"])}var ft=ut,gt=n("88b3"),mt=Object(Y["m"])();function vt(t,e,n){mt(t).coordSysRecordMap.each((function(t){var a=t.dataZoomInfoMap.get(e.uid);a&&(a.getRange=n)}))}function yt(t,e){for(var n=mt(t).coordSysRecordMap,a=n.keys(),i=0;i<a.length;i++){var o=a[i],r=n.get(o),s=r.dataZoomInfoMap;if(s){var l=e.uid,c=s.get(l);c&&(s.removeKey(l),s.keys().length||_t(n,r))}}}function _t(t,e){if(e){t.removeKey(e.model.uid);var n=e.controller;n&&n.dispose()}}function bt(t,e){var n={model:e,containsPoint:Object(V["h"])(wt,e),dispatchAction:Object(V["h"])(xt,t),dataZoomInfoMap:null,controller:null},a=n.controller=new ft(t.getZr());return Object(V["j"])(["pan","zoom","scrollMove"],(function(t){a.on(t,(function(e){var a=[];n.dataZoomInfoMap.each((function(i){if(e.isAvailableBehavior(i.model.option)){var o=(i.getRange||{})[t],r=o&&o(i.dzReferCoordSysInfo,n.model.mainType,n.controller,e);!i.model.get("disabled",!0)&&r&&a.push({dataZoomId:i.model.id,start:r[0],end:r[1]})}})),a.length&&n.dispatchAction(a)}))})),n}function xt(t,e){t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function wt(t,e,n,a){return t.coordinateSystem.containPoint([n,a])}function Mt(t){var e,n="type_",a={type_true:2,type_move:1,type_false:0,type_undefined:-1},i=!0;return t.each((function(t){var o=t.model,r=!o.get("disabled",!0)&&(!o.get("zoomLock",!0)||"move");a[n+r]>a[n+e]&&(e=r),i=i&&o.get("preventDefaultMouseMove",!0)})),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!i}}}function Ot(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,(function(t,e){var n=mt(e),a=n.coordSysRecordMap||(n.coordSysRecordMap=Object(V["f"])());a.each((function(t){t.dataZoomInfoMap=null})),t.eachComponent({mainType:"dataZoom",subType:"inside"},(function(t){var n=$(t);Object(V["j"])(n.infoList,(function(n){var i=n.model.uid,o=a.get(i)||a.set(i,bt(e,n.model)),r=o.dataZoomInfoMap||(o.dataZoomInfoMap=Object(V["f"])());r.set(t.uid,{dzReferCoordSysInfo:n,model:t,getRange:null})}))})),a.each((function(t){var e,n=t.controller,i=t.dataZoomInfoMap;if(i){var o=i.keys()[0];null!=o&&(e=i.get(o))}if(e){var r=Mt(i);n.enable(r.controlType,r.opt),n.setPointerChecker(t.containsPoint),gt["b"](t,"dispatchAction",e.model.get("throttle",!0),"fixRate")}else _t(a,t)}))}))}var St=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return Object(I["b"])(e,t),e.prototype.render=function(e,n,a){t.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),vt(a,e,{pan:Object(V["c"])(jt.pan,this),zoom:Object(V["c"])(jt.zoom,this),scrollMove:Object(V["c"])(jt.scrollMove,this)}))},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){yt(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(et),jt={zoom:function(t,e,n,a){var i=this.range,o=i.slice(),r=t.axisModels[0];if(r){var s=At[e](null,[a.originX,a.originY],r,n,t),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(o[1]-o[0])+o[0],c=Math.max(1/a.scale,0);o[0]=(o[0]-l)*c+l,o[1]=(o[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return nt(0,o,[0,100],0,u.minSpan,u.maxSpan),this.range=o,i[0]!==o[0]||i[1]!==o[1]?o:void 0}},pan:Ct((function(t,e,n,a,i,o){var r=At[a]([o.oldX,o.oldY],[o.newX,o.newY],e,i,n);return r.signal*(t[1]-t[0])*r.pixel/r.pixelLength})),scrollMove:Ct((function(t,e,n,a,i,o){var r=At[a]([0,0],[o.scrollDelta,o.scrollDelta],e,i,n);return r.signal*(t[1]-t[0])*o.scrollDelta}))};function Ct(t){return function(e,n,a,i){var o=this.range,r=o.slice(),s=e.axisModels[0];if(s){var l=t(r,s,e,n,a,i);return nt(l,r,[0,100],"all"),this.range=r,o[0]!==r[0]||o[1]!==r[1]?r:void 0}}}var At={grid:function(t,e,n,a,i){var o=n.axis,r={},s=i.model.coordinateSystem.getRect();return t=t||[0,0],"x"===o.dim?(r.pixel=e[0]-t[0],r.pixelLength=s.width,r.pixelStart=s.x,r.signal=o.inverse?1:-1):(r.pixel=e[1]-t[1],r.pixelLength=s.height,r.pixelStart=s.y,r.signal=o.inverse?-1:1),r},polar:function(t,e,n,a,i){var o=n.axis,r={},s=i.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(r.pixel=e[0]-t[0],r.pixelLength=l[1]-l[0],r.pixelStart=l[0],r.signal=o.inverse?1:-1):(r.pixel=e[1]-t[1],r.pixelLength=c[1]-c[0],r.pixelStart=c[0],r.signal=o.inverse?-1:1),r},singleAxis:function(t,e,n,a,i){var o=n.axis,r=i.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===o.orient?(s.pixel=e[0]-t[0],s.pixelLength=r.width,s.pixelStart=r.x,s.signal=o.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=r.height,s.pixelStart=r.y,s.signal=o.inverse?-1:1),s}},Dt=St,It=n("3842"),Rt=n("697e"),Pt=n("538f"),zt=V["j"],Lt=It["b"],Tt=function(){function t(t,e,n,a){this._dimName=t,this._axisIndex=e,this.ecModel=a,this._dataZoomModel=n}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries((function(e){if(H(e)){var n=N(this._dimName),a=e.getReferringComponents(n,Y["b"]).models[0];a&&this._axisIndex===a.componentIndex&&t.push(e)}}),this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return V["d"](this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var e,n=this._dataExtent,a=this.getAxisModel(),i=a.axis.scale,o=this._dataZoomModel.getRangePropMode(),r=[0,100],s=[],l=[];zt(["start","end"],(function(a,c){var u=t[a],d=t[a+"Value"];"percent"===o[c]?(null==u&&(u=r[c]),d=i.parse(It["j"](u,r,n))):(e=!0,d=null==d?n[c]:i.parse(d),u=It["j"](d,n,r)),l[c]=d,s[c]=u})),Lt(l),Lt(s);var c=this._minMaxSpan;function u(t,e,n,a,o){var r=o?"Span":"ValueSpan";nt(0,t,n,"all",c["min"+r],c["max"+r]);for(var s=0;s<2;s++)e[s]=It["j"](t[s],n,a,!0),o&&(e[s]=i.parse(e[s]))}return e?u(l,s,n,r,!1):u(s,l,r,n,!0),{valueWindow:l,percentWindow:s}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=kt(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var n=this._dimName,a=this.getTargetSeriesModels(),i=t.get("filterMode"),o=this._valueWindow;"none"!==i&&zt(a,(function(t){var e=t.getData(),a=e.mapDimensionsAll(n);a.length&&("weakFilter"===i?e.filterSelf((function(t){for(var n,i,r,s=0;s<a.length;s++){var l=e.get(a[s],t),c=!isNaN(l),u=l<o[0],d=l>o[1];if(c&&!u&&!d)return!0;c&&(r=!0),u&&(n=!0),d&&(i=!0)}return r&&n&&i})):zt(a,(function(n){if("empty"===i)t.setData(e=e.map(n,(function(t){return r(t)?t:NaN})));else{var a={};a[n]=o,e.selectRange(a)}})),zt(a,(function(t){e.setApproximateExtent(o,t)})))}))}function r(t){return t>=o[0]&&t<=o[1]}},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;zt(["min","max"],(function(a){var i=e.get(a+"Span"),o=e.get(a+"ValueSpan");null!=o&&(o=this.getAxisModel().axis.scale.parse(o)),null!=o?i=It["j"](n[0]+o,n,[0,100],!0):null!=i&&(o=It["j"](i,[0,100],n,!0)-n[0]),t[a+"Span"]=i,t[a+"ValueSpan"]=o}),this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(e){var a=It["e"](n,[0,500]);a=Math.min(a,20);var i=t.axis.scale.rawExtentInfo;0!==e[0]&&i.setDeterminedMinMax("min",+n[0].toFixed(a)),100!==e[1]&&i.setDeterminedMinMax("max",+n[1].toFixed(a)),i.freeze()}},t}();function kt(t,e,n){var a=[1/0,-1/0];zt(n,(function(t){Object(Rt["j"])(a,t.getData(),e)}));var i=t.getAxisModel(),o=Object(Pt["a"])(i.axis.scale,i,a).calculate();return[o.min,o.max]}var Zt=Tt,Bt={getTargetSeries:function(t){function e(e){t.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(a,i){var o=t.getComponent(N(a),i);e(a,i,o,n)}))}))}e((function(t,e,n,a){n.__dzAxisProxy=null}));var n=[];e((function(e,a,i,o){i.__dzAxisProxy||(i.__dzAxisProxy=new Zt(e,a,o,t),n.push(i.__dzAxisProxy))}));var a=Object(V["f"])();return Object(V["j"])(n,(function(t){Object(V["j"])(t.getTargetSeriesModels(),(function(t){a.set(t.uid,t)}))})),a},overallReset:function(t,e){t.eachComponent("dataZoom",(function(t){t.eachTargetAxis((function(e,n){t.getAxisProxy(e,n).reset(t)})),t.eachTargetAxis((function(n,a){t.getAxisProxy(n,a).filterData(t,e)}))})),t.eachComponent("dataZoom",(function(t){var e=t.findRepresentativeAxisProxy();if(e){var n=e.getDataPercentWindow(),a=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:a[0],endValue:a[1]})}}))}},Vt=Bt;function Et(t){t.registerAction("dataZoom",(function(t,e){var n=F(e,t);Object(V["j"])(n,(function(e){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})}))}))}var Wt=!1;function Ht(t){Wt||(Wt=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,Vt),Et(t),t.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function Nt(t){Ht(t),t.registerComponentModel(Q),t.registerComponentView(Dt),Ot(t)}var Ft=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return Object(I["b"])(e,t),e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=Object(K["d"])(U.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(U),$t=Ft,Yt=n("dce8"),qt=n("f934"),Xt=n("7d6c"),Gt=n("a15a"),Ut=n("7837"),Kt=_["a"],Jt=7,Qt=1,te=30,ee=7,ne="horizontal",ae="vertical",ie=5,oe=["line","bar","candlestick","scatter"],re={easing:"cubicOut",duration:100},se=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._displayables={},n}return Object(I["b"])(e,t),e.prototype.init=function(t,e){this.api=e,this._onBrush=Object(V["c"])(this._onBrush,this),this._onBrushEnd=Object(V["c"])(this._onBrushEnd,this)},e.prototype.render=function(e,n,a,i){if(t.prototype.render.apply(this,arguments),gt["b"](this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();i&&"dataZoom"===i.type&&i.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){gt["a"](this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new u["a"];this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,n=t.get("brushSelect"),a=n?ee:0,i=this._findCoordRect(),o={width:e.getWidth(),height:e.getHeight()},r=this._orient===ne?{right:o.width-i.x-i.width,top:o.height-te-Jt-a,width:i.width,height:te}:{right:Jt,top:i.y,width:te,height:i.height},s=qt["c"](t.option);Object(V["j"])(["right","top","width","height"],(function(t){"ph"===s[t]&&(s[t]=r[t])}));var l=qt["d"](s,o);this._location={x:l.x,y:l.y},this._size=[l.width,l.height],this._orient===ae&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,e=this._location,n=this._orient,a=this.dataZoomModel.getFirstTargetAxisModel(),i=a&&a.get("inverse"),o=this._displayables.sliderGroup,r=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(n!==ne||i?n===ne&&i?{scaleY:r?1:-1,scaleX:-1}:n!==ae||i?{scaleY:r?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:r?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:r?1:-1,scaleX:1});var s=t.getBoundingRect([o]);t.x=e.x-s.x,t.y=e.y-s.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,n=this._displayables.sliderGroup,a=t.get("brushSelect");n.add(new Kt({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var i=new Kt({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:Object(V["c"])(this._onClickPanel,this)}),o=this.api.getZr();a?(i.on("mousedown",this._onBrushStart,this),i.cursor="crosshair",o.on("mousemove",this._onBrush),o.on("mouseup",this._onBrushEnd)):(o.off("mousemove",this._onBrush),o.off("mouseup",this._onBrushEnd)),n.add(i)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,n=t.series,a=n.getRawData(),i=n.getShadowDim?n.getShadowDim():t.otherDim;if(null!=i){var o=a.getDataExtent(i),r=.3*(o[1]-o[0]);o=[o[0]-r,o[1]+r];var s,l=[0,e[1]],c=[0,e[0]],d=[[e[0],0],[0,0]],h=[],p=c[1]/(a.count()-1),f=0,g=Math.round(a.count()/e[0]);a.each([i],(function(t,e){if(g>0&&e%g)f+=p;else{var n=null==t||isNaN(t)||""===t,a=n?0:Object(It["j"])(t,o,l,!0);n&&!s&&e?(d.push([d[d.length-1][0],0]),h.push([h[h.length-1][0],0])):!n&&s&&(d.push([f,0]),h.push([f,0])),d.push([f,a]),h.push([f,a]),f+=p,s=n}}));for(var m=this.dataZoomModel,_=0;_<3;_++){var b=x(1===_);this._displayables.sliderGroup.add(b),this._displayables.dataShadowSegs.push(b)}}}function x(t){var e=m.getModel(t?"selectedDataBackground":"dataBackground"),n=new u["a"],a=new v["a"]({shape:{points:d},segmentIgnoreThreshold:1,style:e.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),i=new y["a"]({shape:{points:h},segmentIgnoreThreshold:1,style:e.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(a),n.add(i),n}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,a=this.ecModel;return t.eachTargetAxis((function(i,o){var r=t.getAxisProxy(i,o).getTargetSeriesModels();Object(V["j"])(r,(function(t){if(!n&&!(!0!==e&&Object(V["p"])(oe,t.get("type"))<0)){var r,s=a.getComponent(N(i),o).axis,l=le(i),c=t.coordinateSystem;null!=l&&c.getOtherAxis&&(r=c.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),n={thisAxis:s,series:t,thisDim:i,otherDim:l,otherAxisInverse:r}}}),this)}),this),n}},e.prototype._renderHandle=function(){var t=this.group,e=this._displayables,n=e.handles=[null,null],a=e.handleLabels=[null,null],i=this._displayables.sliderGroup,o=this._size,r=this.dataZoomModel,s=this.api,l=r.get("borderRadius")||0,c=r.get("brushSelect"),u=e.filler=new Kt({silent:c,style:{fill:r.get("fillerColor")},textConfig:{position:"inside"}});i.add(u),i.add(new Kt({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1],r:l},style:{stroke:r.get("dataBackgroundColor")||r.get("borderColor"),lineWidth:Qt,fill:"rgba(0,0,0,0)"}})),Object(V["j"])([0,1],(function(e){var o=r.get("handleIcon");!Gt["b"][o]&&o.indexOf("path://")<0&&o.indexOf("image://")<0&&(o="path://"+o);var s=Object(Gt["a"])(o,-1,0,2,2,null,!0);s.attr({cursor:ce(this._orient),draggable:!0,drift:Object(V["c"])(this._onDragMove,this,e),ondragend:Object(V["c"])(this._onDragEnd,this),onmouseover:Object(V["c"])(this._showDataInfo,this,!0),onmouseout:Object(V["c"])(this._showDataInfo,this,!1),z2:5});var l=s.getBoundingRect(),c=r.get("handleSize");this._handleHeight=Object(It["n"])(c,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(r.getModel("handleStyle").getItemStyle()),s.style.strokeNoScale=!0,s.rectHover=!0,s.ensureState("emphasis").style=r.getModel(["emphasis","handleStyle"]).getItemStyle(),Object(Xt["m"])(s);var u=r.get("handleColor");null!=u&&(s.style.fill=u),i.add(n[e]=s);var d=r.getModel("textStyle");t.add(a[e]=new h["a"]({silent:!0,invisible:!0,style:Object(Ut["b"])(d,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:d.getTextColor(),font:d.getFont()}),z2:10}))}),this);var d=u;if(c){var p=Object(It["n"])(r.get("moveHandleSize"),o[1]),f=e.moveHandle=new _["a"]({style:r.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:o[1]-.5,height:p}}),g=.8*p,m=e.moveHandleIcon=Object(Gt["a"])(r.get("moveHandleIcon"),-g/2,-g/2,g,g,"#fff",!0);m.silent=!0,m.y=o[1]+p/2-.5,f.ensureState("emphasis").style=r.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var v=Math.min(o[1]/2,Math.max(p,10));d=e.moveZone=new _["a"]({invisible:!0,shape:{y:o[1]-v,height:p+v}}),d.on("mouseover",(function(){s.enterEmphasis(f)})).on("mouseout",(function(){s.leaveEmphasis(f)})),i.add(f),i.add(m),i.add(d)}d.attr({draggable:!0,cursor:ce(this._orient),drift:Object(V["c"])(this._onDragMove,this,"all"),ondragstart:Object(V["c"])(this._showDataInfo,this,!0),ondragend:Object(V["c"])(this._onDragEnd,this),onmouseover:Object(V["c"])(this._showDataInfo,this,!0),onmouseout:Object(V["c"])(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[Object(It["j"])(t[0],[0,100],e,!0),Object(It["j"])(t[1],[0,100],e,!0)]},e.prototype._updateInterval=function(t,e){var n=this.dataZoomModel,a=this._handleEnds,i=this._getViewExtent(),o=n.findRepresentativeAxisProxy().getMinMaxSpan(),r=[0,100];nt(e,a,i,n.get("zoomLock")?"all":t,null!=o.minSpan?Object(It["j"])(o.minSpan,r,i,!0):null,null!=o.maxSpan?Object(It["j"])(o.maxSpan,r,i,!0):null);var s=this._range,l=this._range=Object(It["b"])([Object(It["j"])(a[0],i,r,!0),Object(It["j"])(a[1],i,r,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},e.prototype._updateView=function(t){var e=this._displayables,n=this._handleEnds,a=Object(It["b"])(n.slice()),i=this._size;Object(V["j"])([0,1],(function(t){var a=e.handles[t],o=this._handleHeight;a.attr({scaleX:o/2,scaleY:o/2,x:n[t]+(t?-1:1),y:i[1]/2-o/2})}),this),e.filler.setShape({x:a[0],y:0,width:a[1]-a[0],height:i[1]});var o={x:a[0],width:a[1]-a[0]};e.moveHandle&&(e.moveHandle.setShape(o),e.moveZone.setShape(o),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",o.x+o.width/2));for(var r=e.dataShadowSegs,s=[0,a[0],a[1],i[0]],l=0;l<r.length;l++){var c=r[l],u=c.getClipPath();u||(u=new _["a"],c.setClipPath(u)),u.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:i[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,n=this._displayables,a=n.handleLabels,i=this._orient,o=["",""];if(e.get("showDetail")){var r=e.findRepresentativeAxisProxy();if(r){var s=r.getAxisModel().axis,l=this._range,u=t?r.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:r.getDataValueWindow();o=[this._formatLabel(u[0],s),this._formatLabel(u[1],s)]}}var d=Object(It["b"])(this._handleEnds.slice());function h(t){var e=c["getTransform"](n.handles[t].parent,this.group),r=c["transformDirection"](0===t?"right":"left",e),s=this._handleWidth/2+ie,l=c["applyTransform"]([d[t]+(0===t?-s:s),this._size[1]/2],e);a[t].setStyle({x:l[0],y:l[1],verticalAlign:i===ne?"middle":r,align:i===ne?r:"center",text:o[t]})}h.call(this,0),h.call(this,1)},e.prototype._formatLabel=function(t,e){var n=this.dataZoomModel,a=n.get("labelFormatter"),i=n.get("labelPrecision");null!=i&&"auto"!==i||(i=e.getPixelPrecision());var o=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(i,20));return Object(V["u"])(a)?a(t,o):Object(V["z"])(a)?a.replace("{value}",o):o},e.prototype._showDataInfo=function(t){t=this._dragging||t;var e=this._displayables,n=e.handleLabels;n[0].attr("invisible",!t),n[1].attr("invisible",!t),e.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](e.moveHandle,1)},e.prototype._onDragMove=function(t,e,n,a){this._dragging=!0,rt["g"](a.event);var i=this._displayables.sliderGroup.getLocalTransform(),o=c["applyTransform"]([e,n],i,!0),r=this._updateInterval(t,o[0]),s=this.dataZoomModel.get("realtime");this._updateView(!s),r&&s&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1);var t=this.dataZoomModel.get("realtime");!t&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var e=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var a=this._handleEnds,i=(a[0]+a[1])/2,o=this._updateInterval("all",n[0]-i);this._updateView(),o&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var e=t.offsetX,n=t.offsetY;this._brushStart=new Yt["a"](e,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var n=e.shape,a=+new Date;if(!(a-this._brushStartTime<200&&Math.abs(n.width)<5)){var i=this._getViewExtent(),o=[0,100];this._range=Object(It["b"])([Object(It["j"])(n.x,i,o,!0),Object(It["j"])(n.x+n.width,i,o,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(rt["g"](t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,e){var n=this._displayables,a=this.dataZoomModel,i=n.brushRect;i||(i=n.brushRect=new Kt({silent:!0,style:a.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(i)),i.attr("ignore",!1);var o=this._brushStart,r=this._displayables.sliderGroup,s=r.transformCoordToLocal(t,e),l=r.transformCoordToLocal(o.x,o.y),c=this._size;s[0]=Math.max(Math.min(c[0],s[0]),0),i.setShape({x:l[0],y:0,width:s[0]-l[0],height:c[1]})},e.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?re:null,start:e[0],end:e[1]})},e.prototype._findCoordRect=function(){var t,e=$(this.dataZoomModel).infoList;if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}if(!t){var a=this.api.getWidth(),i=this.api.getHeight();t={x:.2*a,y:.2*i,width:.6*a,height:.6*i}}return t},e.type="dataZoom.slider",e}(et);function le(t){var e={x:"y",y:"x",radius:"angle",angle:"radius"};return e[t]}function ce(t){return"vertical"===t?"ns-resize":"ew-resize"}var ue=se;function de(t){t.registerComponentModel($t),t.registerComponentView(ue),Ht(t)}function he(t){Object(A["a"])(Nt),Object(A["a"])(de)}Object(A["a"])(he);var pe=n("de2b"),fe=n("50fc"),ge={name:"Analytics",data(){return{accountsLoading:!1,accounts:[],accountId:null,loading:!1,riskLoading:!1,statsLoading:!1,curveLoading:!1,performanceData:{},riskData:{},statsList:[],equityCurve:[],curveDateRange:null,chartInstance:null}},beforeDestroy(){window.removeEventListener("resize",this._handleResize),this.chartInstance&&(this.chartInstance.dispose(),this.chartInstance=null)},mounted(){this._handleResize=()=>{this.chartInstance&&this.chartInstance.resize()},window.addEventListener("resize",this._handleResize),this.fetchAccounts()},methods:{formatMoney(t){return null===t||void 0===t?"-":Number(t).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2})},formatPercent(t){return null===t||void 0===t?"-":(100*Number(t)).toFixed(2)+"%"},formatNumber(t,e=2){return null===t||void 0===t?"-":Number(t).toFixed(e)},getRiskTagType(t){if(!t)return"info";const e=t.toString().toLowerCase();return e.includes("低")||e.includes("low")?"success":e.includes("中")||e.includes("medium")?"warning":e.includes("高")||e.includes("high")?"danger":"info"},async fetchAccounts(){this.accountsLoading=!0;try{const t=await Object(fe["p"])({page_size:100}),e=t.data.data||t.data||[];this.accounts=Array.isArray(e)?e:[],this.accounts.length>0&&!this.accountId&&(this.accountId=this.accounts[0].id,this.fetchAll())}catch(t){console.error("获取账户列表失败:",t)}finally{this.accountsLoading=!1}},handleAccountChange(){this.accountId&&this.fetchAll()},fetchAll(){this.fetchPerformance(),this.fetchRisk(),this.fetchStatistics(),this.fetchEquityCurve()},async fetchPerformance(){if(this.accountId){this.loading=!0;try{const t=await Object(pe["c"])({account_id:this.accountId});t.data.success&&t.data.data&&(this.performanceData=t.data.data.summary||{})}catch(t){this.$message.error("获取绩效数据失败"),console.error("获取绩效数据失败:",t)}finally{this.loading=!1}}},async fetchRisk(){if(this.accountId){this.riskLoading=!0;try{const t=await Object(pe["d"])({account_id:this.accountId});t.data.success&&t.data.data&&(this.riskData=t.data.data||{})}catch(t){this.$message.error("获取风险数据失败"),console.error("获取风险数据失败:",t)}finally{this.riskLoading=!1}}},async fetchStatistics(){if(this.accountId){this.statsLoading=!0;try{const t=await Object(pe["e"])({account_id:this.accountId});t.data.success&&t.data.data&&(this.statsList=t.data.data||[])}catch(t){this.$message.error("获取统计数据失败"),console.error("获取统计数据失败:",t)}finally{this.statsLoading=!1}}},async fetchEquityCurve(){if(this.accountId){this.curveLoading=!0;try{const t={account_id:this.accountId};if(this.curveDateRange&&2===this.curveDateRange.length)t.start_date=this.curveDateRange[0],t.end_date=this.curveDateRange[1];else{const e=new Date,n=new Date(e.getTime()-2592e6),a=t=>t.toISOString().slice(0,10);t.start_date=a(n),t.end_date=a(e)}const e=await Object(pe["c"])(t);if(e.data.success&&e.data.data&&e.data.data.equity_curve){const t=e.data.data.equity_curve,n=Array.isArray(t)?t:[];this.equityCurve=n.filter(t=>{var e,n,a;const i=t.date||t.snapshot_date||"",o=Number(null!==(e=null!==(n=null!==(a=t.equity)&&void 0!==a?a:t.nav)&&void 0!==n?n:t.value)&&void 0!==e?e:0);return i&&!Number.isNaN(o)&&o>=0})}else this.equityCurve=[];this.$nextTick(()=>this.renderChart())}catch(t){this.equityCurve=[]}finally{this.curveLoading=!1}}},renderChart(){if(!this.$refs.equityChart)return;if(0===this.equityCurve.length)return void(this.chartInstance&&this.chartInstance.clear());this.chartInstance||(this.chartInstance=r["b"](this.$refs.equityChart));const t=this.equityCurve.map(t=>t.date||t.snapshot_date||""),e=this.equityCurve.map(t=>{var e,n,a;const i=Number(null!==(e=null!==(n=null!==(a=t.equity)&&void 0!==a?a:t.nav)&&void 0!==n?n:t.value)&&void 0!==e?e:0);return Number.isNaN(i)?0:i});this.chartInstance.setOption({tooltip:{trigger:"axis",formatter:t=>{const e=t[0];return`${e.axisValue}<br/>权益: <b>${Number(e.value).toFixed(2)}</b> USDT`}},grid:{left:60,right:20,top:20,bottom:60},xAxis:{type:"category",data:t,axisLabel:{fontSize:11}},yAxis:{type:"value",axisLabel:{formatter:t=>t.toFixed(0)}},dataZoom:[{type:"inside",start:0,end:100},{type:"slider",start:0,end:100,height:20,bottom:5}],series:[{type:"line",data:e,smooth:!0,symbol:"none",lineStyle:{width:2,color:"#409EFF"},areaStyle:{color:new a.LinearGradient(0,0,0,1,[{offset:0,color:"rgba(64,158,255,0.3)"},{offset:1,color:"rgba(64,158,255,0.02)"}])}}]})}}},me=ge,ve=(n("35ae"),n("2877")),ye=Object(ve["a"])(me,i,o,!1,null,"a913af4e",null);e["default"]=ye.exports},de2b:function(t,e,n){"use strict";n.d(e,"a",(function(){return r})),n.d(e,"b",(function(){return s})),n.d(e,"c",(function(){return l})),n.d(e,"d",(function(){return c})),n.d(e,"e",(function(){return u}));var a=n("bc3a"),i=n.n(a);let o={tenant_id:parseInt(localStorage.getItem("ironbull_tenant_id"))||1};function r(){return i.a.get("/dashboard/summary")}function s(t=30){return i.a.get("/dashboard/trends",{params:{days:t}})}function l(t={}){return i.a.get("/analytics/performance",{params:{...o,...t}})}function c(t={}){return i.a.get("/analytics/risk",{params:{...o,...t}})}function u(t={}){return i.a.get("/analytics/statistics",{params:{...o,limit:20,...t}})}}}]);