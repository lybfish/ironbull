(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59069d1e"],{8012:function(t,e,a){"use strict";a.d(e,"c",(function(){return s})),a.d(e,"b",(function(){return o})),a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return u})),a.d(e,"e",(function(){return d}));var l=a("bc3a"),r=a.n(l);let n={tenant_id:1};function i(t){return{...n,...t}}function s(t={}){return r.a.get("/orders",{params:i({limit:50,...t})})}function o(t={}){return r.a.get("/fills",{params:i({limit:50,...t})})}function c(t={}){return r.a.get("/positions",{params:i({limit:100,...t})})}function u(t={}){return r.a.get("/accounts",{params:i({limit:50,...t})})}function d(t={}){return r.a.get("/transactions",{params:i({limit:50,...t})})}},"8fdb":function(t,e,a){},9261:function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ele-body"},[a("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:15}},[a("el-col",{attrs:{span:6}},[a("stat-card",{attrs:{title:"成交笔数",value:t.total,icon:"el-icon-s-data",color:"primary",loading:t.loading,"help-text":"当前筛选结果"}})],1),a("el-col",{attrs:{span:6}},[a("stat-card",{attrs:{title:"总手续费",value:t.stats.totalFee,icon:"el-icon-coin",color:"warning",loading:t.loading}},[a("template",{slot:"value"},[t._v(t._s(t.formatNum(t.stats.totalFee)))])],2)],1),a("el-col",{attrs:{span:6}},[a("stat-card",{attrs:{title:"已实现盈亏",value:t.stats.totalPnl,icon:"el-icon-data-analysis",color:t.stats.totalPnl>=0?"success":"danger",loading:t.loading}},[a("template",{slot:"value"},[a("span",{style:{color:t.stats.totalPnl>=0?"#67c23a":"#f56c6c"}},[t._v(t._s(t.formatNum(t.stats.totalPnl)))])])],2)],1),a("el-col",{attrs:{span:6}},[a("stat-card",{attrs:{title:"买入/卖出",value:t.stats.buyCount+" / "+t.stats.sellCount,icon:"el-icon-s-operation",color:"info",loading:t.loading}})],1)],1),a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"toolbar"},[a("span",{staticClass:"toolbar-title"},[t._v("成交记录")]),a("el-button",{attrs:{size:"small",icon:"el-icon-refresh",loading:t.loading},on:{click:t.fetchData}},[t._v("刷新")])],1),a("div",{staticClass:"search-bar"},[a("el-form",{attrs:{inline:!0,model:t.where,size:"small"}},[a("el-form-item",{attrs:{label:"标的"}},[a("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"如 BTC/USDT",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)}},model:{value:t.where.symbol,callback:function(e){t.$set(t.where,"symbol",e)},expression:"where.symbol"}})],1),a("el-form-item",{attrs:{label:"方向"}},[a("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"全部",clearable:""},model:{value:t.where.side,callback:function(e){t.$set(t.where,"side",e)},expression:"where.side"}},[a("el-option",{attrs:{label:"买入",value:"buy"}}),a("el-option",{attrs:{label:"卖出",value:"sell"}})],1)],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSearch}},[t._v("查询")]),a("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"12px"},attrs:{data:t.list,stripe:"",border:"",size:"small","header-cell-style":{background:"#fafafa"}}},[a("el-table-column",{attrs:{prop:"fill_id",label:"成交ID",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",{attrs:{title:l.fill_id}},[t._v(t._s(t.truncateId(l.fill_id)))])]}}])}),a("el-table-column",{attrs:{prop:"order_id",label:"订单ID",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",{attrs:{title:l.order_id}},[t._v(t._s(t.truncateId(l.order_id)))])]}}])}),a("el-table-column",{attrs:{prop:"symbol",label:"标的",width:"100"}}),a("el-table-column",{attrs:{prop:"exchange",label:"交易所",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",{attrs:{size:"mini"}},[t._v(t._s(l.exchange))])]}}])}),a("el-table-column",{attrs:{prop:"side",label:"方向",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",{attrs:{type:"buy"===l.side||"BUY"===l.side?"success":"danger",size:"mini"}},[t._v(" "+t._s("buy"===l.side||"BUY"===l.side?"买入":"卖出")+" ")])]}}])}),a("el-table-column",{attrs:{prop:"price",label:"成交价",width:"100",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.formatNum(a.price)))]}}])}),a("el-table-column",{attrs:{prop:"quantity",label:"成交量",width:"100",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.formatNum(a.quantity)))]}}])}),a("el-table-column",{attrs:{prop:"fee",label:"手续费",width:"100",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.formatNum(a.fee)))]}}])}),a("el-table-column",{attrs:{prop:"fee_currency",label:"币种",width:"80",align:"center"}}),a("el-table-column",{attrs:{prop:"realized_pnl",label:"已实现盈亏",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",{style:{color:parseFloat(l.realized_pnl||0)>=0?"#67c23a":"#f56c6c",fontWeight:600}},[t._v(" "+t._s(parseFloat(l.realized_pnl||0)>=0?"+":"")+t._s(t.formatNum(l.realized_pnl))+" ")])]}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"成交时间","min-width":"170"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.formatTime(a.created_at)))]}}])})],1),t.loading||0!==t.list.length?t._e():a("el-empty",{attrs:{description:"暂无成交记录"}}),t.total>0?a("div",{staticClass:"pagination-wrap"},[a("span",{staticClass:"total-tip"},[t._v("共 "+t._s(t.total)+" 条")]),a("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes",total:t.total,"page-sizes":[10,20,50,100],"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"size-change":t.fetchData,"current-change":t.fetchData}})],1):t._e()],1)],1)},r=[],n=(a("0643"),a("4e3e"),a("8012")),i={name:"FillList",data(){return{loading:!1,list:[],total:0,currentPage:1,pageSize:20,where:{symbol:"",side:""}}},computed:{stats(){let t=0,e=0,a=0,l=0;return this.list.forEach(r=>{t+=parseFloat(r.fee||0),e+=parseFloat(r.realized_pnl||0),"buy"===(r.side||"").toLowerCase()?a++:l++}),{totalFee:t,totalPnl:e,buyCount:a,sellCount:l}}},mounted(){this.fetchData()},methods:{formatNum(t){if(null==t||""===t)return"0";const e=parseFloat(t);return isNaN(e)?"0":e.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:6})},formatTime(t){return t?String(t).replace("T"," ").substring(0,19):"-"},truncateId(t){if(!t)return"-";const e=String(t);return e.length<=12?e:e.slice(0,8)+"..."+e.slice(-4)},onSearch(){this.currentPage=1,this.fetchData()},reset(){this.where={symbol:"",side:""},this.currentPage=1,this.fetchData()},async fetchData(){this.loading=!0;try{const t={limit:this.pageSize,offset:(this.currentPage-1)*this.pageSize};this.where.symbol&&(t.symbol=this.where.symbol),this.where.side&&(t.side=this.where.side);const e=await Object(n["b"])(t),a=e.data;this.list=a.data||[],this.total=null!=a.total?a.total:this.list.length}catch(e){var t;this.$message.error((null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.detail)||"获取成交记录失败"),this.list=[],this.total=0}finally{this.loading=!1}}}},s=i,o=(a("d3a1"),a("2877")),c=Object(o["a"])(s,l,r,!1,null,"0e9f31f1",null);e["default"]=c.exports},d3a1:function(t,e,a){"use strict";a("8fdb")}}]);