(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c344279"],{b4c5:function(e,r,s){"use strict";s("de27")},dc3f:function(e,r,s){"use strict";s.r(r);var t=function(){var e=this,r=e.$createElement,s=e._self._c||r;return s("div",{class:["login-wrapper",["","login-form-right","login-form-left"][e.direction]]},[s("el-form",{ref:"form",staticClass:"login-form ele-bg-white",attrs:{size:"large",model:e.form,rules:e.rules},nativeOn:{keyup:function(r){return!r.type.indexOf("key")&&e._k(r.keyCode,"enter",13,r.key,"Enter")?null:e.doSubmit.apply(null,arguments)}}},[s("h4",[e._v("Aigo 管理后台")]),s("el-form-item",{attrs:{prop:"username"}},[s("el-input",{attrs:{clearable:"","prefix-icon":"el-icon-user",placeholder:e.$t("login.username")},model:{value:e.form.username,callback:function(r){e.$set(e.form,"username",r)},expression:"form.username"}})],1),s("el-form-item",{attrs:{prop:"password"}},[s("el-input",{attrs:{"show-password":"","prefix-icon":"el-icon-lock",placeholder:e.$t("login.password")},model:{value:e.form.password,callback:function(r){e.$set(e.form,"password",r)},expression:"form.password"}})],1),s("div",{staticClass:"el-form-item"},[s("el-checkbox",{model:{value:e.form.remember,callback:function(r){e.$set(e.form,"remember",r)},expression:"form.remember"}},[e._v(e._s(e.$t("login.remember")))])],1),s("div",{staticClass:"el-form-item"},[s("el-button",{staticClass:"login-btn",attrs:{size:"large",type:"primary",loading:e.loading},on:{click:e.doSubmit}},[e._v(" "+e._s(e.loading?e.$t("login.loading"):e.$t("login.login"))+" ")])],1)],1),s("div",{staticClass:"login-copyright"},[e._v("Copyright © 2026 Aigo. All rights reserved.")])],1)},o=[],a=s("d2b8"),i={name:"Login",data(){return{direction:0,loading:!1,form:{username:"",password:"",remember:!0}}},computed:{rules(){return{username:[{required:!0,message:this.$t("login.username"),type:"string",trigger:"blur"}],password:[{required:!0,message:this.$t("login.password"),type:"string",trigger:"blur"}]}}},mounted(){a["a"].takeToken()&&this.goHome()},methods:{doSubmit(){this.$refs.form.validate(e=>{if(!e)return!1;this.loading=!0,this.$http.post("/auth/login",{username:this.form.username,password:this.form.password}).then(e=>{this.loading=!1,e.data&&e.data.token?(this.$message.success("登录成功"),this.$store.dispatch("user/setToken",{token:e.data.token,remember:this.form.remember}).then(()=>{e.data.admin&&a["a"].cacheUser({nickname:e.data.admin.username||"Admin",username:e.data.admin.username,admin_id:e.data.admin.id}),this.goHome()})):this.$message.error(e.data.detail||e.data.msg||"登录失败")}).catch(e=>{this.loading=!1,e.response&&e.response.data?this.$message.error(e.response.data.detail||"登录失败"):this.$message.error(e.message||"网络错误")})})},goHome(){const e=this.$route.query,r=e&&e.from?e.from:"/";this.$router.push(r).catch(()=>{})}}},n=i,m=(s("b4c5"),s("2877")),l=Object(m["a"])(n,t,o,!1,null,"7e1e4cf6",null);r["default"]=l.exports},de27:function(e,r,s){}}]);