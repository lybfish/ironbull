(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4661ed7c"],{"112a":function(t,a,e){},"795b":function(t,a,e){"use strict";e("112a")},8012:function(t,a,e){"use strict";e.d(a,"c",(function(){return l})),e.d(a,"b",(function(){return c})),e.d(a,"d",(function(){return o})),e.d(a,"a",(function(){return d})),e.d(a,"e",(function(){return u}));var s=e("bc3a"),i=e.n(s);let r={tenant_id:1};function n(t){return{...r,...t}}function l(t={}){return i.a.get("/orders",{params:n({limit:50,...t})})}function c(t={}){return i.a.get("/fills",{params:n({limit:50,...t})})}function o(t={}){return i.a.get("/positions",{params:n({limit:100,...t})})}function d(t={}){return i.a.get("/accounts",{params:n({limit:50,...t})})}function u(t={}){return i.a.get("/transactions",{params:n({limit:50,...t})})}},a1f5:function(t,a,e){"use strict";e.r(a);var s=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"ele-body"},[e("el-card",{staticStyle:{"margin-bottom":"15px"},attrs:{shadow:"never"}},[e("el-form",{attrs:{inline:!0,size:"small"}},[e("el-form-item",{attrs:{label:"选择账户"}},[e("el-select",{staticStyle:{width:"280px"},attrs:{placeholder:"请选择交易账户",loading:t.accountsLoading},on:{change:t.handleAccountChange},model:{value:t.accountId,callback:function(a){t.accountId=a},expression:"accountId"}},t._l(t.accounts,(function(t){return e("el-option",{key:t.id,attrs:{label:"#"+t.id+" - "+t.exchange+" ("+t.account_type+")",value:t.id}})})),1)],1),e("el-form-item",[e("el-button",{attrs:{type:"primary",icon:"el-icon-refresh",disabled:!t.accountId},on:{click:t.fetchAll}},[t._v("刷新数据")])],1)],1)],1),t.accountId||t.accountsLoading?t._e():e("div",[e("el-empty",{attrs:{description:"请先选择一个交易账户以查看分析数据"}})],1),t.accountId?e("div",[e("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:15}},[e("el-col",{attrs:{lg:4,md:8,sm:12,xs:24}},[e("stat-card",{attrs:{title:"当前权益",value:t.performanceData.current_equity||0,icon:"el-icon-wallet",color:"primary",format:"money",precision:2,"help-text":"账户当前总权益",loading:t.loading}})],1),e("el-col",{attrs:{lg:4,md:8,sm:12,xs:24}},[e("stat-card",{attrs:{title:"累计收益率",value:100*(t.performanceData.total_return||0),icon:"el-icon-trophy",color:"success",format:"percent",precision:2,"help-text":"累计总收益率",loading:t.loading}},[e("template",{slot:"value"},[e("span",{style:{color:(t.performanceData.total_return||0)>=0?"#67C23A":"#F56C6C"}},[t._v(" "+t._s(t.formatPercent(t.performanceData.total_return))+" ")])])],2)],1),e("el-col",{attrs:{lg:4,md:8,sm:12,xs:24}},[e("stat-card",{attrs:{title:"日盈亏",value:t.performanceData.daily_pnl||0,icon:"el-icon-coin",color:"warning",format:"money",precision:2,"help-text":"当日盈亏金额",loading:t.loading}},[e("template",{slot:"value"},[e("span",{style:{color:(t.performanceData.daily_pnl||0)>=0?"#67C23A":"#F56C6C"}},[t._v(" "+t._s(t.formatMoney(t.performanceData.daily_pnl))+" ")])])],2)],1),e("el-col",{attrs:{lg:4,md:8,sm:12,xs:24}},[e("stat-card",{attrs:{title:"夏普比率",value:t.performanceData.sharpe_ratio||0,icon:"el-icon-data-line",color:"info",format:"number",precision:2,"help-text":"风险调整后收益指标",loading:t.loading}})],1),e("el-col",{attrs:{lg:4,md:8,sm:12,xs:24}},[e("stat-card",{attrs:{title:"最大回撤",value:100*(t.riskData.max_drawdown||0),icon:"el-icon-bottom",color:"danger",format:"percent",precision:2,"help-text":"历史最大回撤幅度",loading:t.riskLoading}})],1),e("el-col",{attrs:{lg:4,md:8,sm:12,xs:24}},[e("stat-card",{attrs:{title:"胜率",value:100*(t.performanceData.win_rate||0),icon:"el-icon-success",color:"success",format:"percent",precision:1,"help-text":"盈利交易占比",loading:t.loading}})],1)],1),e("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{"margin-top":"16px"},attrs:{shadow:"never"}},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("绩效汇总")]),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:8}},[e("div",{staticClass:"metric-item"},[e("div",{staticClass:"metric-label"},[t._v("盈利因子")]),e("div",{staticClass:"metric-value"},[t._v(t._s(t.formatNumber(t.performanceData.profit_factor)))])])]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"metric-item"},[e("div",{staticClass:"metric-label"},[t._v("平均交易盈亏")]),e("div",{staticClass:"metric-value"},[t._v(t._s(t.formatMoney(t.performanceData.avg_trade_pnl)))])])]),e("el-col",{attrs:{span:8}},[e("div",{staticClass:"metric-item"},[e("div",{staticClass:"metric-label"},[t._v("总交易次数")]),e("div",{staticClass:"metric-value"},[t._v(t._s(t.performanceData.total_trades||0))])])])],1)],1),e("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.riskLoading,expression:"riskLoading"}],staticStyle:{"margin-top":"16px"},attrs:{shadow:"never"}},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("风险指标")]),e("el-row",{attrs:{gutter:20}},[e("el-col",{attrs:{span:6}},[e("div",{staticClass:"metric-item"},[e("div",{staticClass:"metric-label"},[t._v("最大回撤")]),e("div",{staticClass:"metric-value"},[t._v(t._s(t.formatPercent(t.riskData.max_drawdown)))])])]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"metric-item"},[e("div",{staticClass:"metric-label"},[t._v("VaR (95%)")]),e("div",{staticClass:"metric-value"},[t._v(t._s(t.formatMoney(t.riskData.var_95)))])])]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"metric-item"},[e("div",{staticClass:"metric-label"},[t._v("波动率")]),e("div",{staticClass:"metric-value"},[t._v(t._s(t.formatPercent(t.riskData.volatility)))])])]),e("el-col",{attrs:{span:6}},[e("div",{staticClass:"metric-item"},[e("div",{staticClass:"metric-label"},[t._v("风险等级")]),e("div",{staticClass:"metric-value"},[e("el-tag",{attrs:{type:t.getRiskTagType(t.riskData.risk_level),size:"small"}},[t._v(t._s(t.riskData.risk_level||"-"))])],1)])]),e("el-col",{staticStyle:{"margin-top":"16px"},attrs:{span:6}},[e("div",{staticClass:"metric-item"},[e("div",{staticClass:"metric-label"},[t._v("当前回撤")]),e("div",{staticClass:"metric-value"},[t._v(t._s(t.formatPercent(t.riskData.current_drawdown)))])])])],1)],1),e("el-card",{directives:[{name:"loading",rawName:"v-loading",value:t.statsLoading,expression:"statsLoading"}],staticStyle:{"margin-top":"16px"},attrs:{shadow:"never"}},[e("div",{attrs:{slot:"header"},slot:"header"},[t._v("交易统计")]),e("el-table",{attrs:{data:t.statsList,stripe:"",border:"",size:"small","header-cell-style":{background:"#fafafa"}}},[e("el-table-column",{attrs:{prop:"date",label:"日期",width:"120"}}),e("el-table-column",{attrs:{prop:"symbol",label:"交易对",width:"150"}}),e("el-table-column",{attrs:{prop:"trades",label:"交易次数",width:"100",align:"right"}}),e("el-table-column",{attrs:{prop:"pnl",label:"盈亏",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){var s=a.row;return[e("span",{style:{color:(s.pnl||0)>=0?"#67C23A":"#F56C6C"}},[t._v(t._s(t.formatMoney(s.pnl)))])]}}],null,!1,49422115)}),e("el-table-column",{attrs:{prop:"win_rate",label:"胜率",width:"100",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.row;return[t._v(t._s(t.formatPercent(e.win_rate)))]}}],null,!1,1673384875)}),e("el-table-column",{attrs:{prop:"volume",label:"成交量",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.row;return[t._v(t._s(t.formatMoney(e.volume)))]}}],null,!1,2333790821)}),e("el-table-column",{attrs:{prop:"fees",label:"手续费",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(a){var e=a.row;return[t._v(t._s(t.formatMoney(e.fees)))]}}],null,!1,360546712)})],1),t.statsLoading||0!==t.statsList.length?t._e():e("el-empty",{attrs:{description:"暂无统计数据"}})],1)],1):t._e()],1)},i=[],r=e("de2b"),n=e("8012"),l={name:"Analytics",data(){return{accountsLoading:!1,accounts:[],accountId:null,loading:!1,riskLoading:!1,statsLoading:!1,performanceData:{},riskData:{},statsList:[]}},mounted(){this.fetchAccounts()},methods:{formatMoney(t){return null===t||void 0===t?"-":Number(t).toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2})},formatPercent(t){return null===t||void 0===t?"-":(100*Number(t)).toFixed(2)+"%"},formatNumber(t,a=2){return null===t||void 0===t?"-":Number(t).toFixed(a)},getRiskTagType(t){if(!t)return"info";const a=t.toString().toLowerCase();return a.includes("低")||a.includes("low")?"success":a.includes("中")||a.includes("medium")?"warning":a.includes("高")||a.includes("high")?"danger":"info"},async fetchAccounts(){this.accountsLoading=!0;try{const t=await Object(n["a"])(),a=t.data.data||t.data||[];this.accounts=Array.isArray(a)?a:[],this.accounts.length>0&&!this.accountId&&(this.accountId=this.accounts[0].id,this.fetchAll())}catch(t){console.error("获取账户列表失败:",t)}finally{this.accountsLoading=!1}},handleAccountChange(){this.accountId&&this.fetchAll()},fetchAll(){this.fetchPerformance(),this.fetchRisk(),this.fetchStatistics()},async fetchPerformance(){if(this.accountId){this.loading=!0;try{const t=await Object(r["b"])({account_id:this.accountId});t.data.success&&t.data.data&&(this.performanceData=t.data.data.summary||{})}catch(t){console.error("获取绩效数据失败:",t)}finally{this.loading=!1}}},async fetchRisk(){if(this.accountId){this.riskLoading=!0;try{const t=await Object(r["c"])({account_id:this.accountId});t.data.success&&t.data.data&&(this.riskData=t.data.data||{})}catch(t){console.error("获取风险数据失败:",t)}finally{this.riskLoading=!1}}},async fetchStatistics(){if(this.accountId){this.statsLoading=!0;try{const t=await Object(r["d"])({account_id:this.accountId});t.data.success&&t.data.data&&(this.statsList=t.data.data||[])}catch(t){console.error("获取统计数据失败:",t)}finally{this.statsLoading=!1}}}}},c=l,o=(e("795b"),e("2877")),d=Object(o["a"])(c,s,i,!1,null,"0814a69a",null);a["default"]=d.exports},de2b:function(t,a,e){"use strict";e.d(a,"a",(function(){return n})),e.d(a,"b",(function(){return l})),e.d(a,"c",(function(){return c})),e.d(a,"d",(function(){return o}));var s=e("bc3a"),i=e.n(s);let r={tenant_id:1};function n(){return i.a.get("/dashboard/summary")}function l(t={}){return i.a.get("/analytics/performance",{params:{...r,...t}})}function c(t={}){return i.a.get("/analytics/risk",{params:{...r,...t}})}function o(t={}){return i.a.get("/analytics/statistics",{params:{...r,limit:20,...t}})}}}]);