(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d6ebe38c"],{8012:function(t,e,a){"use strict";a.d(e,"c",(function(){return o})),a.d(e,"b",(function(){return s})),a.d(e,"d",(function(){return c})),a.d(e,"a",(function(){return u})),a.d(e,"e",(function(){return d}));var l=a("bc3a"),r=a.n(l);let n={tenant_id:1};function i(t){return{...n,...t}}function o(t={}){return r.a.get("/orders",{params:i({limit:50,...t})})}function s(t={}){return r.a.get("/fills",{params:i({limit:50,...t})})}function c(t={}){return r.a.get("/positions",{params:i({limit:100,...t})})}function u(t={}){return r.a.get("/accounts",{params:i({limit:50,...t})})}function d(t={}){return r.a.get("/transactions",{params:i({limit:50,...t})})}},"8df6":function(t,e,a){"use strict";a.r(e);var l=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"ele-body"},[a("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:15}},[a("el-col",{attrs:{xs:24,sm:12,md:6}},[a("stat-card",{attrs:{title:"账户总数",value:t.list.length,icon:"el-icon-s-custom",color:"primary",loading:t.loading,"help-text":"当前筛选结果"}})],1),a("el-col",{attrs:{xs:24,sm:12,md:6}},[a("stat-card",{attrs:{title:"总权益",value:t.totalEquity,icon:"el-icon-wallet",color:"success",loading:t.loading}},[a("template",{slot:"value"},[t._v(t._s(t.formatCurrency(t.totalEquity)))])],2)],1),a("el-col",{attrs:{xs:24,sm:12,md:6}},[a("stat-card",{attrs:{title:"总余额",value:t.totalBalance,icon:"el-icon-coin",color:"warning",loading:t.loading}},[a("template",{slot:"value"},[t._v(t._s(t.formatCurrency(t.totalBalance)))])],2)],1),a("el-col",{attrs:{xs:24,sm:12,md:6}},[a("stat-card",{attrs:{title:"未实现盈亏",value:t.totalUnrealizedPnl,icon:"el-icon-data-analysis",color:t.totalUnrealizedPnl>=0?"success":"danger",loading:t.loading}},[a("template",{slot:"value"},[a("span",{style:{color:t.totalUnrealizedPnl>=0?"#67C23A":"#F56C6C"}},[t._v(t._s(t.formatCurrency(t.totalUnrealizedPnl)))])])],2)],1)],1),a("el-card",{attrs:{shadow:"never"}},[a("div",{staticClass:"toolbar"},[a("span",{staticClass:"toolbar-title"},[t._v("资金账户")]),a("div",[a("el-select",{staticStyle:{width:"120px","margin-right":"8px"},attrs:{placeholder:"币种筛选",clearable:"",size:"small"},on:{change:t.fetchData},model:{value:t.filterCurrency,callback:function(e){t.filterCurrency=e},expression:"filterCurrency"}},[a("el-option",{attrs:{label:"USDT",value:"USDT"}}),a("el-option",{attrs:{label:"BTC",value:"BTC"}}),a("el-option",{attrs:{label:"全部",value:""}})],1),a("el-button",{attrs:{size:"small",icon:"el-icon-refresh",loading:t.loading},on:{click:t.fetchData}},[t._v("刷新")])],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"12px"},attrs:{data:t.list,stripe:"",border:"",size:"small","header-cell-style":{background:"#fafafa"}}},[a("el-table-column",{attrs:{prop:"ledger_account_id",label:"账本ID",width:"140","show-overflow-tooltip":""},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",{staticClass:"mono"},[t._v(t._s(l.ledger_account_id||"-"))])]}}])}),a("el-table-column",{attrs:{prop:"account_id",label:"账户ID",width:"90",align:"center"}}),a("el-table-column",{attrs:{prop:"currency",label:"币种",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",{attrs:{size:"mini",type:"info"}},[t._v(t._s(l.currency))])]}}])}),a("el-table-column",{attrs:{prop:"balance",label:"余额",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.formatCurrency(a.balance)))]}}])}),a("el-table-column",{attrs:{prop:"available",label:"可用",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.formatCurrency(a.available)))]}}])}),a("el-table-column",{attrs:{prop:"frozen",label:"冻结",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.formatCurrency(a.frozen)))]}}])}),a("el-table-column",{attrs:{prop:"equity",label:"权益",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",{staticStyle:{"font-weight":"600"}},[t._v(t._s(t.formatCurrency(null!=l.equity?l.equity:l.balance)))])]}}])}),a("el-table-column",{attrs:{prop:"margin_ratio",label:"保证金率",width:"100",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.formatPercentage(a.margin_ratio)))]}}])}),a("el-table-column",{attrs:{prop:"unrealized_pnl",label:"未实现盈亏",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("span",{style:{color:(l.unrealized_pnl||0)>=0?"#67C23A":"#F56C6C"}},[t._v(" "+t._s(t.formatCurrency(l.unrealized_pnl))+" ")])]}}])}),a("el-table-column",{attrs:{prop:"status",label:"状态",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var l=e.row;return[a("el-tag",{attrs:{type:"ACTIVE"===l.status?"success":"info",size:"mini"}},[t._v(t._s(l.status||"ACTIVE"))])]}}])}),a("el-table-column",{attrs:{prop:"updated_at",label:"更新时间",width:"170"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[t._v(t._s(t.formatTime(a.updated_at)))]}}])})],1),t.loading||0!==t.list.length?t._e():a("el-empty",{attrs:{description:"暂无账户数据"}},[a("span",{attrs:{slot:"description"},slot:"description"},[t._v("暂无资金账户数据，请确认当前租户下已绑定交易账户并完成 Ledger 同步。")])]),t.list.length>0?a("div",{staticClass:"footer-tip"},[t._v(" 共 "+t._s(t.list.length)+" 个账户（Ledger 层 · 按租户筛选） ")]):t._e()],1)],1)},r=[],n=(a("13d5"),a("0643"),a("9d4a"),a("8012")),i={name:"AccountList",data(){return{loading:!1,list:[],filterCurrency:""}},computed:{totalEquity(){return this.list.reduce((t,e)=>t+(parseFloat(null!=e.equity?e.equity:e.balance)||0),0)},totalBalance(){return this.list.reduce((t,e)=>t+(parseFloat(e.balance)||0),0)},totalUnrealizedPnl(){return this.list.reduce((t,e)=>t+(parseFloat(e.unrealized_pnl)||0),0)}},mounted(){this.fetchData()},methods:{formatTime(t){return t?String(t).replace("T"," ").substring(0,19):"-"},formatCurrency(t){if(null==t||""===t)return"0.00";const e=parseFloat(t);return isNaN(e)?"0.00":e.toLocaleString("zh-CN",{minimumFractionDigits:2,maximumFractionDigits:2})},formatPercentage(t){if(null==t||""===t)return"-";const e=parseFloat(t);return isNaN(e)?"-":(100*e).toFixed(2)+"%"},async fetchData(){this.loading=!0;try{const t={};this.filterCurrency&&(t.currency=this.filterCurrency);const e=await Object(n["a"])(t),a=e.data;this.list=a.data||[]}catch(e){var t;this.$message.error((null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.detail)||"获取资金账户失败"),this.list=[]}finally{this.loading=!1}}}},o=i,s=(a("de9b"),a("2877")),c=Object(s["a"])(o,l,r,!1,null,"6df5afa8",null);e["default"]=c.exports},"91a4":function(t,e,a){},de9b:function(t,e,a){"use strict";a("91a4")}}]);