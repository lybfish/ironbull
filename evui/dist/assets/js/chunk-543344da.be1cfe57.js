(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-543344da"],{"05b7":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"ele-body ele-body-card"},[n("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:15}},[n("el-col",{attrs:{lg:4,md:8,sm:12}},[n("stat-card",{attrs:{title:"总用户",value:e.overview.total_users,icon:"el-icon-user",color:"primary",loading:e.loading}})],1),n("el-col",{attrs:{lg:4,md:8,sm:12}},[n("stat-card",{attrs:{title:"活跃用户",value:e.overview.active_users,icon:"el-icon-user-solid",color:"success",loading:e.loading}})],1),n("el-col",{attrs:{lg:4,md:8,sm:12}},[n("stat-card",{attrs:{title:e.periodDays+"天新增",value:e.overview.new_users_period,icon:"el-icon-plus",color:"warning",loading:e.loading}})],1),n("el-col",{attrs:{lg:4,md:8,sm:12}},[n("stat-card",{attrs:{title:"交易用户",value:e.overview.trading_users,icon:"el-icon-s-data",color:"danger","help-text":"有活跃策略绑定",loading:e.loading}})],1),n("el-col",{attrs:{lg:4,md:8,sm:12}},[n("stat-card",{attrs:{title:"已充值",value:e.overview.funded_users,icon:"el-icon-bank-card",color:"info","help-text":"有点卡余额",loading:e.loading}})],1),n("el-col",{attrs:{lg:4,md:8,sm:12}},[n("stat-card",{attrs:{title:"市场节点",value:e.overview.market_nodes,icon:"el-icon-star-on",color:"warning",loading:e.loading}})],1)],1),n("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:15}},[n("el-col",{attrs:{lg:16,md:24}},[n("el-card",{attrs:{shadow:"never"}},[n("div",{staticClass:"hdr",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("用户增长趋势")]),n("el-radio-group",{attrs:{size:"mini"},on:{change:e.fetchAll},model:{value:e.periodDays,callback:function(t){e.periodDays=t},expression:"periodDays"}},[n("el-radio-button",{attrs:{label:7}},[e._v("7天")]),n("el-radio-button",{attrs:{label:30}},[e._v("30天")]),n("el-radio-button",{attrs:{label:60}},[e._v("60天")])],1)],1),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"chartGrowth",staticStyle:{height:"300px"}})])],1),n("el-col",{attrs:{lg:8,md:24}},[n("el-card",{attrs:{shadow:"never"}},[n("div",{attrs:{slot:"header"},slot:"header"},[e._v("用户分层（按点卡余额）")]),n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"chartTiers",staticStyle:{height:"300px"}})])],1)],1),n("el-row",{attrs:{gutter:15}},[n("el-col",{attrs:{lg:8,md:24}},[n("el-card",{attrs:{shadow:"never"}},[n("div",{staticClass:"hdr",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("点卡余额排行")]),n("el-tag",{attrs:{type:"warning",size:"mini"}},[e._v("Top "+e._s(e.rankLimit))])],1),n("el-table",{attrs:{data:e.rankPointCard,size:"mini",stripe:"","show-header":!1,"max-height":"320"}},[n("el-table-column",{attrs:{width:"40",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",{staticClass:"rank-num"},[e._v(e._s(a.rank))])]}}])}),n("el-table-column",{attrs:{prop:"email","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{width:"100",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",{staticStyle:{"font-weight":"600"}},[e._v(e._s(a.value.toFixed(2)))])]}}])})],1)],1)],1),n("el-col",{attrs:{lg:8,md:24}},[n("el-card",{attrs:{shadow:"never"}},[n("div",{staticClass:"hdr",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("累计奖励排行")]),n("el-tag",{attrs:{type:"success",size:"mini"}},[e._v("Top "+e._s(e.rankLimit))])],1),n("el-table",{attrs:{data:e.rankReward,size:"mini",stripe:"","show-header":!1,"max-height":"320"}},[n("el-table-column",{attrs:{width:"40",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",{staticClass:"rank-num"},[e._v(e._s(a.rank))])]}}])}),n("el-table-column",{attrs:{prop:"email","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{width:"100",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",{staticStyle:{"font-weight":"600"}},[e._v(e._s(a.value.toFixed(2)))])]}}])})],1)],1)],1),n("el-col",{attrs:{lg:8,md:24}},[n("el-card",{attrs:{shadow:"never"}},[n("div",{staticClass:"hdr",attrs:{slot:"header"},slot:"header"},[n("span",[e._v("成交笔数排行")]),n("el-tag",{attrs:{type:"primary",size:"mini"}},[e._v("Top "+e._s(e.rankLimit))])],1),n("el-table",{attrs:{data:e.rankTrade,size:"mini",stripe:"","show-header":!1,"max-height":"320"}},[n("el-table-column",{attrs:{width:"40",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",{staticClass:"rank-num"},[e._v(e._s(a.rank))])]}}])}),n("el-table-column",{attrs:{prop:"email","show-overflow-tooltip":""}}),n("el-table-column",{attrs:{width:"80",align:"right"},scopedSlots:e._u([{key:"default",fn:function(t){var a=t.row;return[n("span",{staticStyle:{"font-weight":"600"}},[e._v(e._s(a.value))])]}}])})],1)],1)],1)],1)],1)},i=[],r=(n("0643"),n("4e3e"),n("a573"),n("7cf8")),o=n("22b4"),l=n("1be7"),s=n("3620"),c=n("4cb5"),d=n("f3bb"),g=n("3842"),u=n("f934"),h=n("6d8b"),p=2*Math.PI,f=Math.PI/180;function v(e,t){return u["d"](e.getBoxLayoutParams(),{width:t.getWidth(),height:t.getHeight()})}function m(e,t,n){t.eachSeriesByType(e,(function(e){var t=e.getData(),a=t.mapDimension("value"),i=v(e,n),r=e.get("center"),o=e.get("radius");h["r"](o)||(o=[0,o]),h["r"](r)||(r=[r,r]);var l=Object(g["n"])(i.width,n.getWidth()),s=Object(g["n"])(i.height,n.getHeight()),c=Math.min(l,s),d=Object(g["n"])(r[0],l)+i.x,u=Object(g["n"])(r[1],s)+i.y,m=Object(g["n"])(o[0],c/2),y=Object(g["n"])(o[1],c/2),b=-e.get("startAngle")*f,x=e.get("minAngle")*f,w=0;t.each(a,(function(e){!isNaN(e)&&w++}));var S=t.getSum(a),_=Math.PI/(S||w)*2,O=e.get("clockwise"),I=e.get("roseType"),A=e.get("stillShowZeroSum"),D=t.getDataExtent(a);D[0]=0;var C=p,j=0,L=b,M=O?1:-1;if(t.setLayout({viewRect:i,r:y}),t.each(a,(function(e,n){var a;if(isNaN(e))t.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:O,cx:d,cy:u,r0:m,r:I?NaN:y});else{a="area"!==I?0===S&&A?_:e*_:p/w,a<x?(a=x,C-=x):j+=e;var i=L+M*a;t.setItemLayout(n,{angle:a,startAngle:L,endAngle:i,clockwise:O,cx:d,cy:u,r0:m,r:I?Object(g["j"])(e,D,[m,y]):y}),L=i}})),C<p&&w)if(C<=.001){var k=p/w;t.each(a,(function(e,n){if(!isNaN(e)){var a=t.getItemLayout(n);a.angle=k,a.startAngle=b+M*n*k,a.endAngle=b+M*(n+1)*k}}))}else _=C/j,L=b,t.each(a,(function(e,n){if(!isNaN(e)){var a=t.getItemLayout(n),i=a.angle===x?x:e*_;a.startAngle=L,a.endAngle=L+M*i,L+=M*i}}))}))}function y(e){return{seriesType:e,reset:function(e,t){var n=t.findComponents({mainType:"legend"});if(n&&n.length){var a=e.getData();a.filterSelf((function(e){for(var t=a.getName(e),i=0;i<n.length;i++)if(!n[i].isSelected(t))return!1;return!0}))}}}}var b=n("9ab4"),x=n("76a5"),w=n("2306"),S=n("d498"),_=n("4aa2"),O=n("2dc5"),I=n("7d6c"),A=n("e887"),D=n("dce8"),C=n("89b6"),j=n("2355"),L=Math.PI/180;function M(e,t,n,a,i,r,o,l,s,c){if(!(e.length<2)){for(var d=e.length,g=0;g<d;g++)if("outer"===e[g].position&&"labelLine"===e[g].labelAlignTo){var u=e[g].label.x-c;e[g].linePoints[1][0]+=u,e[g].label.x=c}Object(j["d"])(e,s,s+o)&&p(e)}function h(e){for(var r=e.rB,o=r*r,l=0;l<e.list.length;l++){var s=e.list[l],c=Math.abs(s.label.y-n),d=a+s.len,g=d*d,u=Math.sqrt((1-Math.abs(c*c/o))*g);s.label.x=t+(u+s.len2)*i}}function p(e){for(var r={list:[],maxY:0},o={list:[],maxY:0},l=0;l<e.length;l++)if("none"===e[l].labelAlignTo){var s=e[l],c=s.label.y>n?o:r,d=Math.abs(s.label.y-n);if(d>c.maxY){var g=s.label.x-t-s.len2*i,u=a+s.len,p=Math.abs(g)<u?Math.sqrt(d*d/(1-g*g/u/u)):u;c.rB=p,c.maxY=d}c.list.push(s)}h(r),h(o)}}function k(e,t,n,a,i,r,o,l){for(var s=[],c=[],d=Number.MAX_VALUE,g=-Number.MAX_VALUE,u=0;u<e.length;u++){var h=e[u].label;T(e[u])||(h.x<t?(d=Math.min(d,h.x),s.push(e[u])):(g=Math.max(g,h.x),c.push(e[u])))}M(c,t,n,a,1,i,r,o,l,g),M(s,t,n,a,-1,i,r,o,l,d);for(u=0;u<e.length;u++){var p=e[u];h=p.label;if(!T(p)){var f=p.linePoints;if(f){var v="edge"===p.labelAlignTo,m=p.rect.width,y=void 0;y=v?h.x<t?f[2][0]-p.labelDistance-o-p.edgeDistance:o+i-p.edgeDistance-f[2][0]-p.labelDistance:h.x<t?h.x-o-p.bleedMargin:o+i-h.x-p.bleedMargin,y<p.rect.width&&(p.label.style.width=y,"edge"===p.labelAlignTo&&(m=y));var b=f[1][0]-f[2][0];v?h.x<t?f[2][0]=o+p.edgeDistance+m+p.labelDistance:f[2][0]=o+i-p.edgeDistance-m-p.labelDistance:(h.x<t?f[2][0]=h.x+p.labelDistance:f[2][0]=h.x-p.labelDistance,f[1][0]=f[2][0]+b),f[1][1]=f[2][1]=h.y}}}}function T(e){return"center"===e.position}function P(e){var t,n,a=e.getData(),i=[],r=!1,o=(e.get("minShowLabelAngle")||0)*L,l=a.getLayout("viewRect"),s=a.getLayout("r"),c=l.width,d=l.x,u=l.y,p=l.height;function f(e){e.ignore=!0}function v(e){if(!e.ignore)return!0;for(var t in e.states)if(!1===e.states[t].ignore)return!0;return!1}a.each((function(e){var l=a.getItemGraphicEl(e),u=l.shape,p=l.getTextContent(),m=l.getTextGuideLine(),y=a.getItemModel(e),b=y.getModel("label"),x=b.get("position")||y.get(["emphasis","label","position"]),w=b.get("distanceToLabelLine"),S=b.get("alignTo"),_=Object(g["n"])(b.get("edgeDistance"),c),O=b.get("bleedMargin"),I=y.getModel("labelLine"),A=I.get("length");A=Object(g["n"])(A,c);var C=I.get("length2");if(C=Object(g["n"])(C,c),Math.abs(u.endAngle-u.startAngle)<o)return Object(h["j"])(p.states,f),void(p.ignore=!0);if(v(p)){var j,L,M,k,T=(u.startAngle+u.endAngle)/2,P=Math.cos(T),G=Math.sin(T);t=u.cx,n=u.cy;var N,R="inside"===x||"inner"===x;if("center"===x)j=u.cx,L=u.cy,k="center";else{var z=(R?(u.r+u.r0)/2*P:u.r*P)+t,W=(R?(u.r+u.r0)/2*G:u.r*G)+n;if(j=z+3*P,L=W+3*G,!R){var B=z+P*(A+s-u.r),E=W+G*(A+s-u.r),V=B+(P<0?-1:1)*C,F=E;j="edge"===S?P<0?d+_:d+c-_:V+(P<0?-w:w),L=F,M=[[z,W],[B,E],[V,F]]}k=R?"center":"edge"===S?P>0?"right":"left":P>0?"left":"right"}var H=b.get("rotate");if(N="number"===typeof H?H*(Math.PI/180):H?P<0?-T+Math.PI:-T:0,r=!!N,p.x=j,p.y=L,p.rotation=N,p.setStyle({verticalAlign:"middle"}),R){p.setStyle({align:k});var U=p.states.select;U&&(U.x+=p.x,U.y+=p.y)}else{var Y=p.getBoundingRect().clone();Y.applyTransform(p.getComputedTransform());var $=(p.style.margin||0)+2.1;Y.y-=$/2,Y.height+=$,i.push({label:p,labelLine:m,position:x,len:A,len2:C,minTurnAngle:I.get("minTurnAngle"),maxSurfaceAngle:I.get("maxSurfaceAngle"),surfaceNormal:new D["a"](P,G),linePoints:M,textAlign:k,labelDistance:w,labelAlignTo:S,edgeDistance:_,bleedMargin:O,rect:Y})}l.setTextConfig({inside:R})}})),!r&&e.get("avoidLabelOverlap")&&k(i,t,n,s,c,p,d,u);for(var m=0;m<i.length;m++){var y=i[m],b=y.label,x=y.labelLine,w=isNaN(b.x)||isNaN(b.y);if(b){b.setStyle({align:y.textAlign}),w&&(Object(h["j"])(b.states,f),b.ignore=!0);var S=b.states.select;S&&(S.x+=b.x,S.y+=b.y)}if(x){var _=y.linePoints;w||!_?(Object(h["j"])(x.states,f),x.ignore=!0):(Object(C["c"])(_,y.minTurnAngle),Object(C["b"])(_,y.surfaceNormal,y.maxSurfaceAngle),x.setShape({points:_}),b.__hostTarget.textGuideLineConfig={anchor:new D["a"](_[0][0],_[0][1])})}}}var G=n("7837"),N=n("e86a");function R(e,t){var n=e.get("borderRadius");return null==n?null:(Object(h["r"])(n)||(n=[n,n]),{innerCornerRadius:Object(N["h"])(n[0],t.r0),cornerRadius:Object(N["h"])(n[1],t.r)})}var z=function(e){function t(t,n,a){var i=e.call(this)||this;i.z2=2;var r=new x["a"];return i.setTextContent(r),i.updateData(t,n,a,!0),i}return Object(b["b"])(t,e),t.prototype.updateData=function(e,t,n,a){var i=this,r=e.hostModel,o=e.getItemModel(t),l=o.getModel("emphasis"),s=e.getItemLayout(t),c=Object(h["l"])(R(o.getModel("itemStyle"),s)||{},s);if(isNaN(c.startAngle))i.setShape(c);else{if(a){i.setShape(c);var d=r.getShallow("animationType");"scale"===d?(i.shape.r=s.r0,w["initProps"](i,{shape:{r:s.r}},r,t)):null!=n?(i.setShape({startAngle:n,endAngle:n}),w["initProps"](i,{shape:{startAngle:s.startAngle,endAngle:s.endAngle}},r,t)):(i.shape.endAngle=s.startAngle,w["updateProps"](i,{shape:{endAngle:s.endAngle}},r,t))}else w["updateProps"](i,{shape:c},r,t);i.useStyle(e.getItemVisual(t,"style")),Object(I["D"])(i,o);var g=(s.startAngle+s.endAngle)/2,u=r.get("selectedOffset"),p=Math.cos(g)*u,f=Math.sin(g)*u,v=o.getShallow("cursor");v&&i.attr("cursor",v),this._updateLabel(r,e,t),i.ensureState("emphasis").shape=Object(b["a"])({r:s.r+(l.get("scale")&&l.get("scaleSize")||0)},R(l.getModel("itemStyle"),s)),Object(h["l"])(i.ensureState("select"),{x:p,y:f,shape:R(o.getModel(["select","itemStyle"]),s)}),Object(h["l"])(i.ensureState("blur"),{shape:R(o.getModel(["blur","itemStyle"]),s)});var m=i.getTextGuideLine(),y=i.getTextContent();m&&Object(h["l"])(m.ensureState("select"),{x:p,y:f}),Object(h["l"])(y.ensureState("select"),{x:p,y:f}),Object(I["m"])(this,l.get("focus"),l.get("blurScope"))}},t.prototype._updateLabel=function(e,t,n){var a=this,i=t.getItemModel(n),r=i.getModel("labelLine"),o=t.getItemVisual(n,"style"),l=o&&o.fill,s=o&&o.opacity;Object(G["f"])(a,Object(G["d"])(i),{labelFetcher:t.hostModel,labelDataIndex:n,inheritColor:l,defaultOpacity:s,defaultText:e.getFormattedLabel(n,"normal")||t.getName(n)});var c=a.getTextContent();a.setTextConfig({position:null,rotation:null}),c.attr({z2:10});var d=e.get(["label","position"]);if("outside"!==d&&"outer"!==d)a.removeTextGuideLine();else{var g=this.getTextGuideLine();g||(g=new S["a"],this.setTextGuideLine(g)),Object(C["d"])(this,Object(C["a"])(i),{stroke:l,opacity:Object(h["M"])(r.get(["lineStyle","opacity"]),s,1)})}},t}(_["a"]),W=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.ignoreLabelLineUpdate=!0,t}return Object(b["b"])(t,e),t.prototype.init=function(){var e=new O["a"];this._sectorGroup=e},t.prototype.render=function(e,t,n,a){var i,r=e.getData(),o=this._data,l=this.group;if(!o&&r.count()>0){for(var s=r.getItemLayout(0),c=1;isNaN(s&&s.startAngle)&&c<r.count();++c)s=r.getItemLayout(c);s&&(i=s.startAngle)}r.diff(o).add((function(e){var t=new z(r,e,i);r.setItemGraphicEl(e,t),l.add(t)})).update((function(e,t){var n=o.getItemGraphicEl(t);n.updateData(r,e,i),n.off("click"),l.add(n),r.setItemGraphicEl(e,n)})).remove((function(t){var n=o.getItemGraphicEl(t);w["removeElementWithFadeOut"](n,e,t)})).execute(),P(e),"expansion"!==e.get("animationTypeUpdate")&&(this._data=r)},t.prototype.dispose=function(){},t.prototype.containPoint=function(e,t){var n=t.getData(),a=n.getItemLayout(0);if(a){var i=e[0]-a.cx,r=e[1]-a.cy,o=Math.sqrt(i*i+r*r);return o<=a.r&&o>=a.r0}},t.type="pie",t}(A["a"]),B=W,E=n("b1d4"),V=n("6179");function F(e,t,n){t=Object(h["r"])(t)&&{coordDimensions:t}||Object(h["l"])({},t);var a=e.getSource(),i=Object(E["a"])(a,t),r=new V["a"](i,e);return r.initData(a,n),r}var H=n("e0d3"),U=n("0f99"),Y=function(){function e(e,t){this._getDataWithEncodedVisual=e,this._getRawData=t}return e.prototype.getAllNames=function(){var e=this._getRawData();return e.mapArray(e.getName)},e.prototype.containName=function(e){var t=this._getRawData();return t.indexOfName(e)>=0},e.prototype.indexOfName=function(e){var t=this._getDataWithEncodedVisual();return t.indexOfName(e)},e.prototype.getItemVisual=function(e,t){var n=this._getDataWithEncodedVisual();return n.getItemVisual(e,t)},e}(),$=Y,q=n("4f85"),X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.useColorPaletteOnData=!0,t}return Object(b["b"])(t,e),t.prototype.init=function(t){e.prototype.init.apply(this,arguments),this.legendVisualProvider=new $(h["c"](this.getData,this),h["c"](this.getRawData,this)),this._defaultLabelLine(t)},t.prototype.mergeOption=function(){e.prototype.mergeOption.apply(this,arguments)},t.prototype.getInitialData=function(){return F(this,{coordDimensions:["value"],encodeDefaulter:h["h"](U["d"],this)})},t.prototype.getDataParams=function(t){var n=this.getData(),a=e.prototype.getDataParams.call(this,t),i=[];return n.each(n.mapDimension("value"),(function(e){i.push(e)})),a.percent=Object(g["d"])(i,t,n.hostModel.get("percentPrecision")),a.$vars.push("percent"),a},t.prototype._defaultLabelLine=function(e){H["e"](e,"labelLine",["show"]);var t=e.labelLine,n=e.emphasis.labelLine;t.show=t.show&&e.label.show,n.show=n.show&&e.emphasis.label.show},t.type="series.pie",t.defaultOption={zlevel:0,z:2,legendHoverLink:!0,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},t}(q["a"]),J=X;function Z(e){e.registerChartView(B),e.registerSeriesModel(J),Object(d["a"])("pie",e.registerAction),e.registerLayout(Object(h["h"])(m,"pie")),e.registerProcessor(y("pie"))}var K=n("4b2a"),Q=n("2da7"),ee=n("ff32"),te=n("f95e");o["a"]([s["a"],c["a"],Z,K["a"],Q["a"],ee["a"],te["a"]]);var ne={name:"UserAnalytics",data(){return{loading:!1,periodDays:30,rankLimit:15,overview:{},rankPointCard:[],rankReward:[],rankTrade:[],chartInst:{}}},mounted(){this.fetchAll(),this.resizeFn=()=>{Object.values(this.chartInst).forEach(e=>e&&e.resize())},window.addEventListener("resize",this.resizeFn)},beforeDestroy(){window.removeEventListener("resize",this.resizeFn),Object.values(this.chartInst).forEach(e=>e&&e.dispose())},methods:{async fetchAll(){this.loading=!0;try{const[e,t,n,a,i]=await Promise.allSettled([Object(r["j"])(this.periodDays),Object(r["k"])(this.periodDays),Object(r["l"])({rank_by:"point_card",limit:this.rankLimit}),Object(r["l"])({rank_by:"reward",limit:this.rankLimit}),Object(r["l"])({rank_by:"trade_count",limit:this.rankLimit})]);if("fulfilled"===e.status&&(this.overview=e.value.data&&e.value.data.data||{},this.$nextTick(()=>{this.renderTiers()})),"fulfilled"===t.status){const e=t.value.data&&t.value.data.data||{};this.$nextTick(()=>{this.renderGrowth(e)})}"fulfilled"===n.status&&(this.rankPointCard=n.value.data&&n.value.data.data||[]),"fulfilled"===a.status&&(this.rankReward=a.value.data&&a.value.data.data||[]),"fulfilled"===i.status&&(this.rankTrade=i.value.data&&i.value.data.data||[])}catch(e){console.error(e)}finally{this.loading=!1}},getChart(e){if(this.chartInst[e])return this.chartInst[e];const t=this.$refs[e];if(!t)return null;const n=l["b"](t);return this.chartInst[e]=n,n},renderGrowth(e){const t=this.getChart("chartGrowth");t&&t.setOption({tooltip:{trigger:"axis"},legend:{data:["每日新增","累计用户"],bottom:0},grid:{left:50,right:50,top:20,bottom:40},xAxis:{type:"category",data:(e.dates||[]).map(e=>e.slice(5)),axisLabel:{fontSize:11}},yAxis:[{type:"value",name:"新增",splitLine:{lineStyle:{color:"#F2F6FC"}}},{type:"value",name:"累计"}],series:[{name:"每日新增",type:"bar",data:e.daily_new||[],itemStyle:{color:"#409EFF",borderRadius:[3,3,0,0]},barMaxWidth:16},{name:"累计用户",type:"line",yAxisIndex:1,data:e.cumulative||[],smooth:!0,lineStyle:{color:"#67C23A"},itemStyle:{color:"#67C23A"},symbol:"none"}]},!0)},renderTiers(){const e=this.getChart("chartTiers");if(!e)return;const t=this.overview.user_tiers||[];e.setOption({tooltip:{trigger:"item",formatter:"{b}: {c} ({d}%)"},series:[{type:"pie",radius:["40%","70%"],label:{fontSize:11},data:t.map(e=>({name:e.label,value:e.count})),itemStyle:{borderRadius:4,borderColor:"#fff",borderWidth:2}}]},!0)}}},ae=ne,ie=(n("ca5e"),n("2877")),re=Object(ie["a"])(ae,a,i,!1,null,"78c27b6b",null);t["default"]=re.exports},"9b6d":function(e,t,n){},ca5e:function(e,t,n){"use strict";n("9b6d")},ff32:function(e,t,n){"use strict";n.d(t,"a",(function(){return K}));var a=n("22b4"),i=n("9ab4"),r=n("6d8b"),o=n("4319"),l=n("e0d3"),s=n("6cb7"),c=function(e,t){return"all"===t?{type:"all",title:e.getLocale(["legend","selector","all"])}:"inverse"===t?{type:"inverse",title:e.getLocale(["legend","selector","inverse"])}:void 0},d=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.layoutMode={type:"box",ignoreSize:!0},n}return Object(i["b"])(t,e),t.prototype.init=function(e,t,n){this.mergeDefaultAndTheme(e,n),e.selected=e.selected||{},this._updateSelector(e)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),this._updateSelector(t)},t.prototype._updateSelector=function(e){var t=e.selector,n=this.ecModel;!0===t&&(t=e.selector=["all","inverse"]),r["r"](t)&&r["j"](t,(function(e,a){r["z"](e)&&(e={type:e}),t[a]=r["F"](e,c(n,e.type))}))},t.prototype.optionUpdated=function(){this._updateData(this.ecModel);var e=this._data;if(e[0]&&"single"===this.get("selectedMode")){for(var t=!1,n=0;n<e.length;n++){var a=e[n].get("name");if(this.isSelected(a)){this.select(a),t=!0;break}}!t&&this.select(e[0].get("name"))}},t.prototype._updateData=function(e){var t=[],n=[];e.eachRawSeries((function(a){var i,r=a.name;if(n.push(r),a.legendVisualProvider){var o=a.legendVisualProvider,s=o.getAllNames();e.isSeriesFiltered(a)||(n=n.concat(s)),s.length?t=t.concat(s):i=!0}else i=!0;i&&Object(l["l"])(a)&&t.push(a.name)})),this._availableNames=n;var a=this.get("data")||t,i=r["E"](a,(function(e){return"string"!==typeof e&&"number"!==typeof e||(e={name:e}),new o["a"](e,this,this.ecModel)}),this);this._data=i},t.prototype.getData=function(){return this._data},t.prototype.select=function(e){var t=this.option.selected,n=this.get("selectedMode");if("single"===n){var a=this._data;r["j"](a,(function(e){t[e.get("name")]=!1}))}t[e]=!0},t.prototype.unSelect=function(e){"single"!==this.get("selectedMode")&&(this.option.selected[e]=!1)},t.prototype.toggleSelected=function(e){var t=this.option.selected;t.hasOwnProperty(e)||(t[e]=!0),this[t[e]?"unSelect":"select"](e)},t.prototype.allSelect=function(){var e=this._data,t=this.option.selected;r["j"](e,(function(e){t[e.get("name",!0)]=!0}))},t.prototype.inverseSelect=function(){var e=this._data,t=this.option.selected;r["j"](e,(function(e){var n=e.get("name",!0);t.hasOwnProperty(n)||(t[n]=!0),t[n]=!t[n]}))},t.prototype.isSelected=function(e){var t=this.option.selected;return!(t.hasOwnProperty(e)&&!t[e])&&r["p"](this._availableNames,e)>=0},t.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},t.type="legend.plain",t.dependencies=["series"],t.defaultOption={zlevel:0,z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",decal:"inherit",shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit",shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:" sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},t}(s["a"]),g=d,u=n("41ef"),h=n("2dc5"),p=n("76a5"),f=n("c7a2"),v=n("2306"),m=n("7d6c"),y=n("7837"),b=n("f934"),x=n("eda2");function w(e,t){var n=x["g"](t.get("padding")),a=t.getItemStyle(["color","opacity"]);return a.fill=t.get("backgroundColor"),e=new f["a"]({shape:{x:e.x-n[3],y:e.y-n[0],width:e.width+n[1]+n[3],height:e.height+n[0]+n[2],r:t.get("borderRadius")},style:a,silent:!0,z2:-1}),e}var S=n("b12f"),_=n("3901"),O=n("551f"),I=n("a15a"),A=r["h"],D=r["j"],C=h["a"],j=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!1,n}return Object(i["b"])(t,e),t.prototype.init=function(){this.group.add(this._contentGroup=new C),this.group.add(this._selectorGroup=new C),this._isFirstRender=!0},t.prototype.getContentGroup=function(){return this._contentGroup},t.prototype.getSelectorGroup=function(){return this._selectorGroup},t.prototype.render=function(e,t,n){var a=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),e.get("show",!0)){var i=e.get("align"),o=e.get("orient");i&&"auto"!==i||(i="right"===e.get("left")&&"vertical"===o?"right":"left");var l=e.get("selector",!0),s=e.get("selectorPosition",!0);!l||s&&"auto"!==s||(s="horizontal"===o?"end":"start"),this.renderInner(i,e,t,n,l,o,s);var c=e.getBoxLayoutParams(),d={width:n.getWidth(),height:n.getHeight()},g=e.get("padding"),u=b["d"](c,d,g),h=this.layoutInner(e,i,u,a,l,s),p=b["d"](r["i"]({width:h.width,height:h.height},c),d,g);this.group.x=p.x-h.x,this.group.y=p.y-h.y,this.group.markRedraw(),this.group.add(this._backgroundEl=w(h,e))}},t.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},t.prototype.renderInner=function(e,t,n,a,i,o,l){var s=this.getContentGroup(),c=r["f"](),d=t.get("selectedMode"),g=[];n.eachRawSeries((function(e){!e.get("legendHoverLink")&&g.push(e.id)})),D(t.getData(),(function(i,r){var o=i.get("name");if(!this.newlineDisabled&&(""===o||"\n"===o)){var l=new C;return l.newline=!0,void s.add(l)}var h=n.getSeriesByName(o)[0];if(!c.get(o)){if(h){var p=h.getData(),f=p.getVisual("legendLineStyle")||{},v=p.getVisual("legendIcon"),m=p.getVisual("style"),y=this._createItem(h,o,r,i,t,e,f,m,v,d);y.on("click",A(k,o,null,a,g)).on("mouseover",A(P,h.name,null,a,g)).on("mouseout",A(G,h.name,null,a,g)),c.set(o,!0)}else n.eachRawSeries((function(n){if(!c.get(o)&&n.legendVisualProvider){var l=n.legendVisualProvider;if(!l.containName(o))return;var s=l.indexOfName(o),h=l.getItemVisual(s,"style"),p=l.getItemVisual(s,"legendIcon"),f=Object(u["c"])(h.fill);f&&0===f[3]&&(f[3]=.2,h.fill=Object(u["d"])(f,"rgba"));var v=this._createItem(n,o,r,i,t,e,{},h,p,d);v.on("click",A(k,null,o,a,g)).on("mouseover",A(P,null,o,a,g)).on("mouseout",A(G,null,o,a,g)),c.set(o,!0)}}),this);0}}),this),i&&this._createSelector(i,t,a,o,l)},t.prototype._createSelector=function(e,t,n,a,i){var r=this.getSelectorGroup();D(e,(function(e){var a=e.type,i=new p["a"]({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===a?"legendAllSelect":"legendInverseSelect"})}});r.add(i);var o=t.getModel("selectorLabel"),l=t.getModel(["emphasis","selectorLabel"]);Object(y["f"])(i,{normal:o,emphasis:l},{defaultText:e.title}),Object(m["m"])(i)}))},t.prototype._createItem=function(e,t,n,a,i,r,o,l,s,c){var d=e.visualDrawType,g=i.get("itemWidth"),u=i.get("itemHeight"),h=i.isSelected(t),b=a.get("symbolRotate"),x=a.get("icon");s=x||s||"roundRect";var w=i.getModel("lineStyle"),S=L(s,a,w,o,l,d,h),_=new C,O=a.getModel("textStyle");if("function"!==typeof e.getLegendIcon||x&&"inherit"!==x){var I="inherit"===x&&e.getData().getVisual("symbol")?"inherit"===b?e.getData().getVisual("symbolRotate"):b:0;_.add(M({itemWidth:g,itemHeight:u,icon:s,iconRotate:I,itemStyle:S.itemStyle,lineStyle:S.lineStyle}))}else _.add(e.getLegendIcon({itemWidth:g,itemHeight:u,icon:s,iconRotate:b,itemStyle:S.itemStyle,lineStyle:S.lineStyle}));var A="left"===r?g+5:-5,D=r,j=i.get("formatter"),k=t;"string"===typeof j&&j?k=j.replace("{name}",null!=t?t:""):"function"===typeof j&&(k=j(t));var T=a.get("inactiveColor");_.add(new p["a"]({style:Object(y["b"])(O,{text:k,x:A,y:u/2,fill:h?O.getTextColor():T,align:D,verticalAlign:"middle"})}));var P=new f["a"]({shape:_.getBoundingRect(),invisible:!0}),G=a.getModel("tooltip");return G.get("show")&&v["setTooltipConfig"]({el:P,componentModel:i,itemName:t,itemTooltipOption:G.option}),_.add(P),_.eachChild((function(e){e.silent=!0})),P.silent=!c,this.getContentGroup().add(_),Object(m["m"])(_),_.__legendDataIndex=n,_},t.prototype.layoutInner=function(e,t,n,a,i,r){var o=this.getContentGroup(),l=this.getSelectorGroup();b["a"](e.get("orient"),o,e.get("itemGap"),n.width,n.height);var s=o.getBoundingRect(),c=[-s.x,-s.y];if(l.markRedraw(),o.markRedraw(),i){b["a"]("horizontal",l,e.get("selectorItemGap",!0));var d=l.getBoundingRect(),g=[-d.x,-d.y],u=e.get("selectorButtonGap",!0),h=e.getOrient().index,p=0===h?"width":"height",f=0===h?"height":"width",v=0===h?"y":"x";"end"===r?g[h]+=s[p]+u:c[h]+=d[p]+u,g[1-h]+=s[f]/2-d[f]/2,l.x=g[0],l.y=g[1],o.x=c[0],o.y=c[1];var m={x:0,y:0};return m[p]=s[p]+u+d[p],m[f]=Math.max(s[f],d[f]),m[v]=Math.min(0,d[v]+g[1-h]),m}return o.x=c[0],o.y=c[1],this.group.getBoundingRect()},t.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},t.type="legend.plain",t}(S["a"]);function L(e,t,n,a,i,r,o){for(var l=t.getModel("itemStyle"),s=O["a"].concat([["decal"]]),c={},d=0;d<s.length;++d){var g=s[d][s[d].length-1],u=s[d][0],h=l.getShallow(g);if("inherit"===h)switch(u){case"fill":c.fill=i[r];break;case"stroke":c.stroke=i[0===e.lastIndexOf("empty",0)?"fill":"stroke"];break;case"opacity":c.opacity=("fill"===r?i:a).opacity;break;default:c[u]=i[u]}else"auto"===h&&"lineWidth"===u?c.lineWidth=i.lineWidth>0?2:0:c[u]=h}var p=t.getModel("lineStyle"),f=_["a"].concat([["inactiveColor"],["inactiveWidth"]]),v={};for(d=0;d<f.length;++d){g=f[d][1],u=f[d][0],h=p.getShallow(g);"inherit"===h?v[u]=a[u]:"auto"===h&&"lineWidth"===u?v.lineWidth=a.lineWidth>0?2:0:v[u]=h}if("auto"===c.fill&&(c.fill=i.fill),"auto"===c.stroke&&(c.stroke=i.fill),"auto"===v.stroke&&(v.stroke=i.fill),!o){var m=t.get("inactiveBorderWidth"),y=c[e.indexOf("empty")>-1?"fill":"stroke"];c.lineWidth="auto"===m?i.lineWidth>0&&y?2:0:c.lineWidth,c.fill=t.get("inactiveColor"),c.stroke=t.get("inactiveBorderColor"),v.stroke=n.get("inactiveColor"),v.lineWidth=n.get("inactiveWidth")}return{itemStyle:c,lineStyle:v}}function M(e){var t=e.icon||"roundRect",n=Object(I["a"])(t,0,0,e.itemWidth,e.itemHeight,e.itemStyle.fill);return n.setStyle(e.itemStyle),n.rotation=(e.iconRotate||0)*Math.PI/180,n.setOrigin([e.itemWidth/2,e.itemHeight/2]),t.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}function k(e,t,n,a){G(e,t,n,a),n.dispatchAction({type:"legendToggleSelect",name:null!=e?e:t}),P(e,t,n,a)}function T(e){var t,n=e.getZr().storage.getDisplayList(),a=0,i=n.length;while(a<i&&!(t=n[a].states.emphasis))a++;return t&&t.hoverLayer}function P(e,t,n,a){T(n)||n.dispatchAction({type:"highlight",seriesName:e,name:t,excludeSeriesId:a})}function G(e,t,n,a){T(n)||n.dispatchAction({type:"downplay",seriesName:e,name:t,excludeSeriesId:a})}var N=j;function R(e){var t=e.findComponents({mainType:"legend"});t&&t.length&&e.filterSeries((function(e){for(var n=0;n<t.length;n++)if(!t[n].isSelected(e.name))return!1;return!0}))}function z(e,t,n){var a,i={},o="toggleSelected"===e;return n.eachComponent("legend",(function(n){o&&null!=a?n[a?"select":"unSelect"](t.name):"allSelect"===e||"inverseSelect"===e?n[e]():(n[e](t.name),a=n.isSelected(t.name));var l=n.getData();Object(r["j"])(l,(function(e){var t=e.get("name");if("\n"!==t&&""!==t){var a=n.isSelected(t);i.hasOwnProperty(t)?i[t]=i[t]&&a:i[t]=a}}))})),"allSelect"===e||"inverseSelect"===e?{selected:i}:{name:t.name,selected:i}}function W(e){e.registerAction("legendToggleSelect","legendselectchanged",Object(r["h"])(z,"toggleSelected")),e.registerAction("legendAllSelect","legendselectall",Object(r["h"])(z,"allSelect")),e.registerAction("legendInverseSelect","legendinverseselect",Object(r["h"])(z,"inverseSelect")),e.registerAction("legendSelect","legendselected",Object(r["h"])(z,"select")),e.registerAction("legendUnSelect","legendunselected",Object(r["h"])(z,"unSelect"))}function B(e){e.registerComponentModel(g),e.registerComponentView(N),e.registerProcessor(e.PRIORITY.PROCESSOR.SERIES_FILTER,R),e.registerSubTypeDefaulter("legend",(function(){return"plain"})),W(e)}var E=n("8918"),V=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n}return Object(i["b"])(t,e),t.prototype.setScrollDataIndex=function(e){this.option.scrollDataIndex=e},t.prototype.init=function(t,n,a){var i=Object(b["c"])(t);e.prototype.init.call(this,t,n,a),F(this,t,i)},t.prototype.mergeOption=function(t,n){e.prototype.mergeOption.call(this,t,n),F(this,this.option,t)},t.type="legend.scroll",t.defaultOption=Object(E["d"])(g.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),t}(g);function F(e,t,n){var a=e.getOrient(),i=[1,1];i[a.index]=0,Object(b["e"])(t,n,{type:"box",ignoreSize:!!i})}var H=V,U=h["a"],Y=["width","height"],$=["x","y"],q=function(e){function t(){var n=null!==e&&e.apply(this,arguments)||this;return n.type=t.type,n.newlineDisabled=!0,n._currentIndex=0,n}return Object(i["b"])(t,e),t.prototype.init=function(){e.prototype.init.call(this),this.group.add(this._containerGroup=new U),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new U)},t.prototype.resetInner=function(){e.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},t.prototype.renderInner=function(t,n,a,i,o,l,s){var c=this;e.prototype.renderInner.call(this,t,n,a,i,o,l,s);var d=this._controllerGroup,g=n.get("pageIconSize",!0),u=r["r"](g)?g:[g,g];f("pagePrev",0);var h=n.getModel("pageTextStyle");function f(e,t){var a=e+"DataIndex",o=v["createIcon"](n.get("pageIcons",!0)[n.getOrient().name][t],{onclick:r["c"](c._pageGo,c,a,n,i)},{x:-u[0]/2,y:-u[1]/2,width:u[0],height:u[1]});o.name=e,d.add(o)}d.add(new p["a"]({name:"pageText",style:{text:"xx/xx",fill:h.getTextColor(),font:h.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),f("pageNext",1)},t.prototype.layoutInner=function(e,t,n,a,i,o){var l=this.getSelectorGroup(),s=e.getOrient().index,c=Y[s],d=$[s],g=Y[1-s],u=$[1-s];i&&b["a"]("horizontal",l,e.get("selectorItemGap",!0));var h=e.get("selectorButtonGap",!0),p=l.getBoundingRect(),f=[-p.x,-p.y],v=r["d"](n);i&&(v[c]=n[c]-p[c]-h);var m=this._layoutContentAndController(e,a,v,s,c,g,u,d);if(i){if("end"===o)f[s]+=m[c]+h;else{var y=p[c]+h;f[s]-=y,m[d]-=y}m[c]+=p[c]+h,f[1-s]+=m[u]+m[g]/2-p[g]/2,m[g]=Math.max(m[g],p[g]),m[u]=Math.min(m[u],p[u]+f[1-s]),l.x=f[0],l.y=f[1],l.markRedraw()}return m},t.prototype._layoutContentAndController=function(e,t,n,a,i,o,l,s){var c=this.getContentGroup(),d=this._containerGroup,g=this._controllerGroup;b["a"](e.get("orient"),c,e.get("itemGap"),a?n.width:null,a?null:n.height),b["a"]("horizontal",g,e.get("pageButtonItemGap",!0));var u=c.getBoundingRect(),h=g.getBoundingRect(),p=this._showController=u[i]>n[i],m=[-u.x,-u.y];t||(m[a]=c[s]);var y=[0,0],x=[-h.x,-h.y],w=r["L"](e.get("pageButtonGap",!0),e.get("itemGap",!0));if(p){var S=e.get("pageButtonPosition",!0);"end"===S?x[a]+=n[i]-h[i]:y[a]+=h[i]+w}x[1-a]+=u[o]/2-h[o]/2,c.setPosition(m),d.setPosition(y),g.setPosition(x);var _={x:0,y:0};if(_[i]=p?n[i]:u[i],_[o]=Math.max(u[o],h[o]),_[l]=Math.min(0,h[l]+x[1-a]),d.__rectSize=n[i],p){var O={x:0,y:0};O[i]=Math.max(n[i]-h[i]-w,0),O[o]=_[o],d.setClipPath(new f["a"]({shape:O})),d.__rectSize=O[i]}else g.eachChild((function(e){e.attr({invisible:!0,silent:!0})}));var I=this._getPageInfo(e);return null!=I.pageIndex&&v["updateProps"](c,{x:I.contentPosition[0],y:I.contentPosition[1]},p?e:null),this._updatePageInfoView(e,I),_},t.prototype._pageGo=function(e,t,n){var a=this._getPageInfo(t)[e];null!=a&&n.dispatchAction({type:"legendScroll",scrollDataIndex:a,legendId:t.id})},t.prototype._updatePageInfoView=function(e,t){var n=this._controllerGroup;r["j"](["pagePrev","pageNext"],(function(a){var i=a+"DataIndex",r=null!=t[i],o=n.childOfName(a);o&&(o.setStyle("fill",r?e.get("pageIconColor",!0):e.get("pageIconInactiveColor",!0)),o.cursor=r?"pointer":"default")}));var a=n.childOfName("pageText"),i=e.get("pageFormatter"),o=t.pageIndex,l=null!=o?o+1:0,s=t.pageCount;a&&i&&a.setStyle("text",r["z"](i)?i.replace("{current}",null==l?"":l+"").replace("{total}",null==s?"":s+""):i({current:l,total:s}))},t.prototype._getPageInfo=function(e){var t=e.get("scrollDataIndex",!0),n=this.getContentGroup(),a=this._containerGroup.__rectSize,i=e.getOrient().index,r=Y[i],o=$[i],l=this._findTargetItemIndex(t),s=n.children(),c=s[l],d=s.length,g=d?1:0,u={contentPosition:[n.x,n.y],pageCount:g,pageIndex:g-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return u;var h=y(c);u.contentPosition[i]=-h.s;for(var p=l+1,f=h,v=h,m=null;p<=d;++p)m=y(s[p]),(!m&&v.e>f.s+a||m&&!b(m,f.s))&&(f=v.i>f.i?v:m,f&&(null==u.pageNextDataIndex&&(u.pageNextDataIndex=f.i),++u.pageCount)),v=m;for(p=l-1,f=h,v=h,m=null;p>=-1;--p)m=y(s[p]),m&&b(v,m.s)||!(f.i<v.i)||(v=f,null==u.pagePrevDataIndex&&(u.pagePrevDataIndex=f.i),++u.pageCount,++u.pageIndex),f=m;return u;function y(e){if(e){var t=e.getBoundingRect(),n=t[o]+e[o];return{s:n,e:n+t[r],i:e.__legendDataIndex}}}function b(e,t){return e.e>=t&&e.s<=t+a}},t.prototype._findTargetItemIndex=function(e){if(!this._showController)return 0;var t,n,a=this.getContentGroup();return a.eachChild((function(a,i){var r=a.__legendDataIndex;null==n&&null!=r&&(n=i),r===e&&(t=i)})),null!=t?t:n},t.type="legend.scroll",t}(N),X=q;function J(e){e.registerAction("legendScroll","legendscroll",(function(e,t){var n=e.scrollDataIndex;null!=n&&t.eachComponent({mainType:"legend",subType:"scroll",query:e},(function(e){e.setScrollDataIndex(n)}))}))}function Z(e){Object(a["a"])(B),e.registerComponentModel(H),e.registerComponentView(X),J(e)}function K(e){Object(a["a"])(B),Object(a["a"])(Z)}}}]);