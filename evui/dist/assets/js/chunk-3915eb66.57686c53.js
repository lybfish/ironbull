(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3915eb66"],{"26a1":function(t,a,s){},"7cf8":function(t,a,s){"use strict";s.d(a,"b",(function(){return i})),s.d(a,"a",(function(){return n}));var e=s("bc3a"),l=s.n(e);function i(){return l.a.get("/monitor/status")}function n(t={}){return l.a.get("/audit-logs",{params:t})}},8012:function(t,a,s){"use strict";s.d(a,"c",(function(){return r})),s.d(a,"b",(function(){return o})),s.d(a,"d",(function(){return c})),s.d(a,"a",(function(){return d})),s.d(a,"e",(function(){return v}));var e=s("bc3a"),l=s.n(e);let i={tenant_id:1};function n(t){return{...i,...t}}function r(t={}){return l.a.get("/orders",{params:n({limit:50,...t})})}function o(t={}){return l.a.get("/fills",{params:n({limit:50,...t})})}function c(t={}){return l.a.get("/positions",{params:n({limit:100,...t})})}function d(t={}){return l.a.get("/accounts",{params:n({limit:50,...t})})}function v(t={}){return l.a.get("/transactions",{params:n({limit:50,...t})})}},8697:function(t,a,s){"use strict";s.r(a);var e=function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"ele-body ele-body-card"},[s("el-card",{attrs:{shadow:"never","body-style":"padding: 20px;"}},[s("div",{staticClass:"ele-cell workplace-user-card"},[s("div",{staticClass:"ele-cell-content ele-cell"},[s("el-avatar",{attrs:{size:68,src:t.loginUser.avatar||t.defaultAvatar}}),s("div",{staticClass:"ele-cell-content"},[s("h4",{staticClass:"ele-elip"},[t._v("你好，【"+t._s(t.loginUser.nickname||"Admin")+"】，欢迎使用 Aigo 管理后台！")]),s("div",{staticClass:"ele-text-secondary ele-elip",staticStyle:{"margin-top":"8px"}},[s("i",{staticClass:"el-icon-sunny"}),s("span",[t._v("祝您交易顺利，收益满满!")])])])],1),s("div",{staticClass:"workplace-count-group"},[s("div",{staticClass:"workplace-count-item"},[s("div",{staticClass:"workplace-count-header"},[s("el-tag",{staticClass:"ele-tag-round",attrs:{type:"primary",size:"small"}},[s("i",{staticClass:"el-icon-wallet"})]),s("span",{staticClass:"workplace-count-name"},[t._v("总余额")])],1),s("div",{staticClass:"workplace-count-num"},[t._v("$"+t._s(t.formatMoney(t.tenant.equity)))])]),s("div",{staticClass:"workplace-count-item"},[s("div",{staticClass:"workplace-count-header"},[s("el-tag",{staticClass:"ele-tag-round",attrs:{type:t.tenant.dailyPnl>=0?"success":"danger",size:"small"}},[s("i",{staticClass:"el-icon-s-data"})]),s("span",{staticClass:"workplace-count-name"},[t._v("日收益")])],1),s("div",{staticClass:"workplace-count-num",class:t.tenant.dailyPnl>=0?"text-success":"text-danger"},[t._v(" $"+t._s(t.formatMoney(t.tenant.dailyPnl))+" ")])]),s("div",{staticClass:"workplace-count-item"},[s("div",{staticClass:"workplace-count-header"},[s("el-tag",{staticClass:"ele-tag-round",attrs:{type:"warning",size:"small"}},[s("i",{staticClass:"el-icon-s-order"})]),s("span",{staticClass:"workplace-count-name"},[t._v("持仓数")])],1),s("div",{staticClass:"workplace-count-num"},[t._v(t._s(t.tenant.positions||0))])]),s("div",{staticClass:"workplace-count-item"},[s("div",{staticClass:"workplace-count-header"},[s("el-tag",{staticClass:"ele-tag-round",attrs:{size:"small"}},[s("i",{staticClass:"el-icon-s-operation"})]),s("span",{staticClass:"workplace-count-name"},[t._v("活跃策略")])],1),s("div",{staticClass:"workplace-count-num"},[t._v(t._s(t.platform.active_bindings||0))])])])])]),s("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:15}},[s("el-col",{attrs:{lg:6,md:12,sm:12}},[s("stat-card",{attrs:{title:"租户总数",value:t.platform.total_tenants,icon:"el-icon-s-custom",color:"primary","help-text":"平台注册租户数量",loading:t.loading},scopedSlots:t._u([{key:"footer",fn:function(){return[s("span",{staticClass:"ele-text-secondary"},[t._v("活跃 "+t._s(t.platform.active_tenants))])]},proxy:!0}])})],1),s("el-col",{attrs:{lg:6,md:12,sm:12}},[s("stat-card",{attrs:{title:"用户总数",value:t.platform.total_users,icon:"el-icon-user",color:"success","help-text":"平台注册用户总数",loading:t.loading}})],1),s("el-col",{attrs:{lg:6,md:12,sm:12}},[s("stat-card",{attrs:{title:"订单总数",value:t.platform.total_orders,icon:"el-icon-document",color:"warning","help-text":"平台累计订单数量",loading:t.loading}})],1),s("el-col",{attrs:{lg:6,md:12,sm:12}},[s("stat-card",{attrs:{title:"执行节点",value:t.platform.total_nodes,icon:"el-icon-s-platform",color:"info","help-text":"已注册的执行节点",loading:t.loading},scopedSlots:t._u([{key:"footer",fn:function(){return[s("span",{staticClass:"ele-text-secondary"},[t._v("在线 "+t._s(t.platform.online_nodes))])]},proxy:!0}])})],1)],1),s("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:15}},[s("el-col",{attrs:{lg:16,md:24}},[s("el-card",{attrs:{shadow:"never"}},[s("div",{staticClass:"card-header-flex",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("绩效摘要")]),s("el-button",{attrs:{size:"mini",icon:"el-icon-refresh",loading:t.loading},on:{click:t.fetchData}},[t._v("刷新")])],1),s("el-row",{attrs:{gutter:20}},t._l(t.perfItems,(function(a){return s("el-col",{key:a.label,staticClass:"perf-item",attrs:{span:4}},[s("div",{staticClass:"perf-label"},[t._v(t._s(a.label))]),s("div",{staticClass:"perf-value",class:a.cls||""},[t._v(t._s(a.value))])])})),1)],1)],1),s("el-col",{attrs:{lg:8,md:24}},[s("el-card",{attrs:{shadow:"never"}},[s("div",{staticClass:"card-header-flex",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("系统状态")]),s("el-tag",{attrs:{type:t.systemHealthy?"success":"danger",size:"small"}},[t._v(" "+t._s(t.systemHealthy?"正常":"异常")+" ")])],1),s("div",{staticClass:"system-status-grid"},[s("div",{staticClass:"status-item"},[s("div",{staticClass:"status-label"},[t._v("data-api")]),s("div",{staticClass:"status-value"},[s("el-tag",{attrs:{type:t.services.data_api?"success":"danger",size:"mini"}},[t._v(" "+t._s(t.services.data_api?"在线":"离线")+" ")])],1)]),s("div",{staticClass:"status-item"},[s("div",{staticClass:"status-label"},[t._v("signal-monitor")]),s("div",{staticClass:"status-value"},[s("el-tag",{attrs:{type:t.services.signal_monitor?"success":"danger",size:"mini"}},[t._v(" "+t._s(t.services.signal_monitor?"在线":"离线")+" ")])],1)]),s("div",{staticClass:"status-item"},[s("div",{staticClass:"status-label"},[t._v("数据库")]),s("div",{staticClass:"status-value"},[s("el-tag",{attrs:{type:t.services.database?"success":"danger",size:"mini"}},[t._v(" "+t._s(t.services.database?"正常":"异常")+" ")])],1)])]),s("div",{staticStyle:{"text-align":"center","margin-top":"15px"}},[s("el-button",{attrs:{size:"mini",icon:"el-icon-refresh",loading:t.loading},on:{click:t.fetchData}},[t._v(" 刷新数据 ")])],1)])],1)],1),s("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:15}},[s("el-col",{attrs:{lg:3,md:6,sm:6,xs:12}},[s("el-card",{attrs:{shadow:"hover","body-style":"padding: 0;"}},[s("router-link",{staticClass:"app-link-block",attrs:{to:"/trading/orders"}},[s("i",{staticClass:"app-link-icon el-icon-s-order"}),s("div",{staticClass:"app-link-title"},[t._v("订单管理")])])],1)],1),s("el-col",{attrs:{lg:3,md:6,sm:6,xs:12}},[s("el-card",{attrs:{shadow:"hover","body-style":"padding: 0;"}},[s("router-link",{staticClass:"app-link-block",attrs:{to:"/trading/positions"}},[s("i",{staticClass:"app-link-icon el-icon-s-data",staticStyle:{color:"#95de64"}}),s("div",{staticClass:"app-link-title"},[t._v("当前持仓")])])],1)],1),s("el-col",{attrs:{lg:3,md:6,sm:6,xs:12}},[s("el-card",{attrs:{shadow:"hover","body-style":"padding: 0;"}},[s("router-link",{staticClass:"app-link-block",attrs:{to:"/strategy/list"}},[s("i",{staticClass:"app-link-icon el-icon-s-opportunity",staticStyle:{color:"#ff9c6e"}}),s("div",{staticClass:"app-link-title"},[t._v("策略目录")])])],1)],1),s("el-col",{attrs:{lg:3,md:6,sm:6,xs:12}},[s("el-card",{attrs:{shadow:"hover","body-style":"padding: 0;"}},[s("router-link",{staticClass:"app-link-block",attrs:{to:"/strategy/signal-control"}},[s("i",{staticClass:"app-link-icon el-icon-connection",staticStyle:{color:"#b37feb"}}),s("div",{staticClass:"app-link-title"},[t._v("信号监控")])])],1)],1),s("el-col",{attrs:{lg:3,md:6,sm:6,xs:12}},[s("el-card",{attrs:{shadow:"hover","body-style":"padding: 0;"}},[s("router-link",{staticClass:"app-link-block",attrs:{to:"/operation/tenants"}},[s("i",{staticClass:"app-link-icon el-icon-s-custom",staticStyle:{color:"#ffd666"}}),s("div",{staticClass:"app-link-title"},[t._v("租户管理")])])],1)],1),s("el-col",{attrs:{lg:3,md:6,sm:6,xs:12}},[s("el-card",{attrs:{shadow:"hover","body-style":"padding: 0;"}},[s("router-link",{staticClass:"app-link-block",attrs:{to:"/operation/exchange-accounts"}},[s("i",{staticClass:"app-link-icon el-icon-wallet",staticStyle:{color:"#5cdbd3"}}),s("div",{staticClass:"app-link-title"},[t._v("交易账户")])])],1)],1),s("el-col",{attrs:{lg:3,md:6,sm:6,xs:12}},[s("el-card",{attrs:{shadow:"hover","body-style":"padding: 0;"}},[s("router-link",{staticClass:"app-link-block",attrs:{to:"/node/list"}},[s("i",{staticClass:"app-link-icon el-icon-s-platform",staticStyle:{color:"#ff85c0"}}),s("div",{staticClass:"app-link-title"},[t._v("执行节点")])])],1)],1),s("el-col",{attrs:{lg:3,md:6,sm:6,xs:12}},[s("el-card",{attrs:{shadow:"hover","body-style":"padding: 0;"}},[s("router-link",{staticClass:"app-link-block",attrs:{to:"/trading/analytics"}},[s("i",{staticClass:"app-link-icon el-icon-data-analysis",staticStyle:{color:"#ffc069"}}),s("div",{staticClass:"app-link-title"},[t._v("绩效分析")])])],1)],1)],1),s("el-row",{attrs:{gutter:15}},[s("el-col",{attrs:{lg:8,md:12}},[s("el-card",{attrs:{shadow:"never"}},[s("div",{staticClass:"card-header-flex",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("账户资产")]),s("router-link",{attrs:{to:"/trading/accounts"}},[s("el-button",{attrs:{type:"text",size:"mini"}},[t._v("详情")])],1)],1),s("div",{staticClass:"trade-overview-item"},[s("div",{staticClass:"trade-overview-label"},[t._v("当前权益")]),s("div",{staticClass:"trade-overview-value"},[t._v(t._s(t.formatMoney(t.tenant.equity))+" USDT")])]),s("div",{staticClass:"trade-overview-item"},[s("div",{staticClass:"trade-overview-label"},[t._v("累计收益率")]),s("div",{staticClass:"trade-overview-value",class:t.tenant.totalReturn>=0?"text-success":"text-danger"},[t._v(" "+t._s(t.fmtPct(t.tenant.totalReturn))+" ")])]),s("div",{staticClass:"trade-overview-item"},[s("div",{staticClass:"trade-overview-label"},[t._v("最大回撤")]),s("div",{staticClass:"trade-overview-value text-danger"},[t._v(t._s(t.fmtPct(t.tenant.maxDrawdown)))])])])],1),s("el-col",{attrs:{lg:8,md:12}},[s("el-card",{attrs:{shadow:"never"}},[s("div",{staticClass:"card-header-flex",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("持仓概览")]),s("router-link",{attrs:{to:"/trading/positions"}},[s("el-button",{attrs:{type:"text",size:"mini"}},[t._v("管理")])],1)],1),s("div",{staticClass:"trade-overview-item"},[s("div",{staticClass:"trade-overview-label"},[t._v("活跃持仓")]),s("div",{staticClass:"trade-overview-value"},[t._v(t._s(t.tenant.positions||0)+" 个")])]),s("div",{staticClass:"trade-overview-item"},[s("div",{staticClass:"trade-overview-label"},[t._v("总订单数")]),s("div",{staticClass:"trade-overview-value"},[t._v(t._s(t.tenant.orders||0))])]),s("div",{staticClass:"trade-overview-item"},[s("div",{staticClass:"trade-overview-label"},[t._v("胜率")]),s("div",{staticClass:"trade-overview-value"},[t._v(t._s(t.fmtPct(t.tenant.winRate,1)))])])])],1),s("el-col",{attrs:{lg:8,md:12}},[s("el-card",{attrs:{shadow:"never"}},[s("div",{staticClass:"card-header-flex",attrs:{slot:"header"},slot:"header"},[s("span",[t._v("风险指标")]),s("router-link",{attrs:{to:"/trading/analytics"}},[s("el-button",{attrs:{type:"text",size:"mini"}},[t._v("查看")])],1)],1),s("div",{staticClass:"trade-overview-item"},[s("div",{staticClass:"trade-overview-label"},[t._v("夏普比率")]),s("div",{staticClass:"trade-overview-value"},[t._v(t._s(null!==t.tenant.sharpeRatio&&void 0!==t.tenant.sharpeRatio?t.tenant.sharpeRatio.toFixed(2):"-"))])]),s("div",{staticClass:"trade-overview-item"},[s("div",{staticClass:"trade-overview-label"},[t._v("总交易次数")]),s("div",{staticClass:"trade-overview-value"},[t._v(t._s(t.tenant.totalTrades||"-"))])]),s("div",{staticClass:"trade-overview-item"},[s("div",{staticClass:"trade-overview-label"},[t._v("日收益")]),s("div",{staticClass:"trade-overview-value",class:t.tenant.dailyPnl>=0?"text-success":"text-danger"},[t._v(" "+t._s(null!==t.tenant.dailyPnl&&void 0!==t.tenant.dailyPnl?t.tenant.dailyPnl.toFixed(2):"-")+" ")])])])],1)],1)],1)},l=[],i=s("de2b"),n=s("8012"),r=s("7cf8"),o={name:"Workplace",data(){return{loading:!0,defaultAvatar:s("cf05"),platform:{total_tenants:0,active_tenants:0,total_users:0,total_orders:0,total_nodes:0,online_nodes:0,active_bindings:0},tenant:{orders:0,positions:0,equity:null,totalReturn:null,dailyPnl:null,maxDrawdown:null,sharpeRatio:null,totalTrades:null,winRate:null},services:{data_api:!1,signal_monitor:!1,database:!1}}},computed:{loginUser(){return this.$store.state.user.user||{}},systemHealthy(){return this.services.data_api&&this.services.database},perfItems(){return[{label:"累计收益率",value:this.fmtPct(this.tenant.totalReturn),cls:this.tenant.totalReturn>=0?"text-success":"text-danger"},{label:"日收益",value:null!==this.tenant.dailyPnl&&void 0!==this.tenant.dailyPnl?this.tenant.dailyPnl.toFixed(2):"-",cls:this.tenant.dailyPnl>=0?"text-success":"text-danger"},{label:"最大回撤",value:this.fmtPct(this.tenant.maxDrawdown),cls:"text-danger"},{label:"夏普比率",value:null!==this.tenant.sharpeRatio&&void 0!==this.tenant.sharpeRatio?this.tenant.sharpeRatio.toFixed(2):"-"},{label:"总交易",value:this.tenant.totalTrades||"-"},{label:"胜率",value:this.fmtPct(this.tenant.winRate,1)}]}},mounted(){this.fetchData()},methods:{formatMoney(t){return null===t||void 0===t?"0.00":parseFloat(t||0).toFixed(2)},fmtPct(t,a){return null===t||void 0===t?"-":(100*t).toFixed(a||2)+"%"},async fetchData(){this.loading=!0;try{const[t,a,s,e,l]=await Promise.allSettled([Object(i["a"])(),Object(n["c"])({limit:1}),Object(n["d"])({limit:1}),Object(i["b"])().catch(()=>null),Object(r["b"])().catch(()=>null)]);if("fulfilled"===t.status&&t.value&&t.value.data){const a=t.value.data.data||t.value.data;Object.assign(this.platform,a)}if("fulfilled"===a.status&&a.value&&(this.tenant.orders=a.value.data.total||0),"fulfilled"===s.status&&s.value&&(this.tenant.positions=s.value.data.total||0),"fulfilled"===e.status&&e.value&&e.value.data){const t=e.value.data.data?e.value.data.data.summary:null;t&&(this.tenant.equity=t.current_equity,this.tenant.totalReturn=t.total_return,this.tenant.dailyPnl=t.daily_pnl,this.tenant.maxDrawdown=t.max_drawdown,this.tenant.sharpeRatio=t.sharpe_ratio,this.tenant.totalTrades=t.total_trades,this.tenant.winRate=t.win_rate)}if("fulfilled"===l.status&&l.value&&l.value.data){const t=l.value.data.data||l.value.data;this.services={data_api:!!t.data_api,signal_monitor:!!t.signal_monitor,database:!!t.database}}}catch(t){console.error(t)}finally{this.loading=!1}}}},c=o,d=(s("b9d4"),s("2877")),v=Object(d["a"])(c,e,l,!1,null,"7f3ac421",null);a["default"]=v.exports},b9d4:function(t,a,s){"use strict";s("26a1")},de2b:function(t,a,s){"use strict";s.d(a,"a",(function(){return n})),s.d(a,"b",(function(){return r})),s.d(a,"c",(function(){return o})),s.d(a,"d",(function(){return c}));var e=s("bc3a"),l=s.n(e);let i={tenant_id:1};function n(){return l.a.get("/dashboard/summary")}function r(t={}){return l.a.get("/analytics/performance",{params:{...i,...t}})}function o(t={}){return l.a.get("/analytics/risk",{params:{...i,...t}})}function c(t={}){return l.a.get("/analytics/statistics",{params:{...i,limit:20,...t}})}}}]);