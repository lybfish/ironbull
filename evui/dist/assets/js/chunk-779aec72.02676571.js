(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-779aec72"],{"50fc":function(t,e,n){"use strict";n.d(e,"s",(function(){return i})),n.d(e,"g",(function(){return s})),n.d(e,"H",(function(){return o})),n.d(e,"C",(function(){return l})),n.d(e,"w",(function(){return u})),n.d(e,"b",(function(){return c})),n.d(e,"r",(function(){return d})),n.d(e,"h",(function(){return f})),n.d(e,"I",(function(){return p})),n.d(e,"d",(function(){return g})),n.d(e,"k",(function(){return h})),n.d(e,"v",(function(){return m})),n.d(e,"t",(function(){return y})),n.d(e,"x",(function(){return b})),n.d(e,"u",(function(){return _})),n.d(e,"z",(function(){return w})),n.d(e,"D",(function(){return v})),n.d(e,"l",(function(){return S})),n.d(e,"e",(function(){return x})),n.d(e,"E",(function(){return k})),n.d(e,"A",(function(){return $})),n.d(e,"y",(function(){return D})),n.d(e,"p",(function(){return C})),n.d(e,"q",(function(){return E})),n.d(e,"f",(function(){return z})),n.d(e,"G",(function(){return F})),n.d(e,"j",(function(){return O})),n.d(e,"B",(function(){return L})),n.d(e,"m",(function(){return N})),n.d(e,"F",(function(){return T})),n.d(e,"i",(function(){return U})),n.d(e,"n",(function(){return P})),n.d(e,"a",(function(){return R})),n.d(e,"c",(function(){return I})),n.d(e,"o",(function(){return B}));var a=n("bc3a"),r=n.n(a);function i(t={}){return r.a.get("/tenants",{params:t})}function s(t){return r.a.post("/tenants",t)}function o(t,e){return r.a.put("/tenants/"+t,e)}function l(t){return r.a.patch(`/tenants/${t}/toggle`)}function u(t,e){return r.a.post(`/tenants/${t}/recharge`,e)}function c(t,e){return r.a.post(`/tenants/${t}/assign-plan`,{plan_id:e})}function d(t,e={}){return r.a.get(`/tenants/${t}/tenant-strategies`,{params:e})}function f(t,e){return r.a.post(`/tenants/${t}/tenant-strategies`,e)}function p(t,e,n){return r.a.put(`/tenants/${t}/tenant-strategies/${e}`,n)}function g(t,e){return r.a.post(`/tenants/${t}/tenant-strategies/${e}/copy-from-master`)}function h(t,e){return r.a.delete(`/tenants/${t}/tenant-strategies/${e}`)}function m(t={}){return r.a.get("/users",{params:t})}function y(t){return r.a.get("/users/"+t)}function b(t,e){return r.a.post(`/users/${t}/recharge`,e)}function _(t,e={}){return r.a.get(`/users/${t}/team`,{params:e})}function w(t,e){return r.a.post(`/users/${t}/set-market-node`,e)}function v(t,e){return r.a.post(`/users/${t}/toggle-status`,{status:e})}function S(t={}){return r.a.get("/admins",{params:t})}function x(t){return r.a.post("/admins",t)}function k(t,e){return r.a.put("/admins/"+t,e)}function $(t){return r.a.patch(`/admins/${t}/toggle`)}function D(t,e){return r.a.post(`/admins/${t}/reset-password`,e)}function C(t={}){return r.a.get("/strategies",{params:t})}function E(t){return r.a.get("/strategies/"+t)}function z(t){return r.a.post("/strategies",t)}function F(t,e){return r.a.post("/strategies/"+t,e)}function O(t){return r.a.delete("/strategies/"+t)}function L(t){return r.a.patch(`/strategies/${t}/toggle`)}function N(t={}){return r.a.get("/strategy-bindings-admin",{params:t})}function T(t,e){return r.a.put("/strategy-bindings-admin/"+t,e)}function U(t){return r.a.delete("/strategy-bindings-admin/"+t)}function P(t={}){return r.a.get("/exchange-accounts",{params:t})}function R(t,e){return r.a.put(`/exchange-accounts/${t}/assign-node`,e)}function I(t){return r.a.post("/exchange-accounts/batch-assign-node",t)}function B(t={}){return r.a.get("/signal-events",{params:t})}},"6cc8":function(t,e,n){},8012:function(t,e,n){"use strict";n.d(e,"e",(function(){return o})),n.d(e,"d",(function(){return l})),n.d(e,"h",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"i",(function(){return d})),n.d(e,"j",(function(){return f})),n.d(e,"b",(function(){return p})),n.d(e,"g",(function(){return g})),n.d(e,"f",(function(){return h})),n.d(e,"a",(function(){return m}));var a=n("bc3a"),r=n.n(a);let i={tenant_id:parseInt(localStorage.getItem("ironbull_tenant_id"))||1};function s(t){return{...i,...t}}function o(t={}){return r.a.get("/orders",{params:s({limit:50,...t})})}function l(t={}){return r.a.get("/fills",{params:s({limit:50,...t})})}function u(t={}){return r.a.get("/positions",{params:s({limit:100,...t})})}function c(t={}){return r.a.get("/accounts",{params:s({limit:50,...t})})}function d(t={}){return r.a.get("/transactions",{params:s({limit:50,...t})})}function f(t){return r.a.post("/manual-order",t)}function p(t){return r.a.post("/close-position",t)}function g(t={}){return r.a.get("/pending-limit-orders",{params:s(t)})}function h(t={}){return r.a.get("/pending-limit-orders/stats",{params:s(t)})}function m(t){return r.a.post(`/pending-limit-orders/${t}/cancel`)}},9261:function(t,e,n){"use strict";n.r(e);var a=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ele-body"},[n("el-row",{staticStyle:{"margin-bottom":"15px"},attrs:{gutter:15}},[n("el-col",{attrs:{span:6}},[n("stat-card",{attrs:{title:"成交笔数",value:t.total,icon:"el-icon-s-data",color:"primary",loading:t.loading,"help-text":"当前筛选结果"}})],1),n("el-col",{attrs:{span:6}},[n("stat-card",{attrs:{title:"成交总额",icon:"el-icon-coin",color:"warning",loading:t.loading}},[n("template",{slot:"value"},[t._v(t._s(t.formatMoney(t.stats.totalValue)))])],2)],1),n("el-col",{attrs:{span:6}},[n("stat-card",{attrs:{title:"总手续费",icon:"el-icon-money",color:"info",loading:t.loading}},[n("template",{slot:"value"},[t._v(t._s(t.formatMoney(t.stats.totalFee)))])],2)],1),n("el-col",{attrs:{span:6}},[n("stat-card",{attrs:{title:"买入/卖出",value:t.stats.buyCount+" / "+t.stats.sellCount,icon:"el-icon-s-operation",color:"info",loading:t.loading}})],1)],1),n("el-card",{attrs:{shadow:"never"}},[n("div",{staticClass:"toolbar"},[n("span",{staticClass:"toolbar-title"},[t._v("成交记录")]),n("el-button",{attrs:{size:"small",icon:"el-icon-refresh",loading:t.loading},on:{click:t.fetchData}},[t._v("刷新")])],1),n("div",{staticClass:"search-bar"},[n("el-form",{attrs:{inline:!0,model:t.where,size:"small"}},[n("el-form-item",{attrs:{label:"订单ID"}},[n("el-input",{staticStyle:{width:"160px"},attrs:{placeholder:"订单ID",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)}},model:{value:t.where.order_id,callback:function(e){t.$set(t.where,"order_id",e)},expression:"where.order_id"}})],1),n("el-form-item",{attrs:{label:"标的"}},[n("el-input",{staticStyle:{width:"140px"},attrs:{placeholder:"如 BTC/USDT",clearable:""},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onSearch.apply(null,arguments)}},model:{value:t.where.symbol,callback:function(e){t.$set(t.where,"symbol",e)},expression:"where.symbol"}})],1),n("el-form-item",{attrs:{label:"方向"}},[n("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"全部",clearable:""},model:{value:t.where.side,callback:function(e){t.$set(t.where,"side",e)},expression:"where.side"}},[n("el-option",{attrs:{label:"买入",value:"BUY"}}),n("el-option",{attrs:{label:"卖出",value:"SELL"}})],1)],1),n("el-form-item",{attrs:{label:"开/平仓"}},[n("el-select",{staticStyle:{width:"100px"},attrs:{placeholder:"全部",clearable:""},model:{value:t.where.trade_type,callback:function(e){t.$set(t.where,"trade_type",e)},expression:"where.trade_type"}},[n("el-option",{attrs:{label:"开仓",value:"OPEN"}}),n("el-option",{attrs:{label:"平仓",value:"CLOSE"}}),n("el-option",{attrs:{label:"加仓",value:"ADD"}}),n("el-option",{attrs:{label:"减仓",value:"REDUCE"}})],1)],1),n("el-form-item",{attrs:{label:"交易所"}},[n("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"全部",clearable:""},model:{value:t.where.exchange,callback:function(e){t.$set(t.where,"exchange",e)},expression:"where.exchange"}},t._l(t.exchangeOptions,(function(t){return n("el-option",{key:t,attrs:{label:t.toUpperCase(),value:t}})})),1)],1),n("el-form-item",{attrs:{label:"日期范围"}},[n("el-date-picker",{staticStyle:{width:"240px"},attrs:{type:"daterange","range-separator":"至","start-placeholder":"开始","end-placeholder":"结束","value-format":"yyyy-MM-dd"},model:{value:t.where.dateRange,callback:function(e){t.$set(t.where,"dateRange",e)},expression:"where.dateRange"}})],1),n("el-form-item",[n("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:t.onSearch}},[t._v("查询")]),n("el-button",{attrs:{icon:"el-icon-refresh-left"},on:{click:t.reset}},[t._v("重置")])],1)],1)],1),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"12px"},attrs:{data:t.filteredList,stripe:"",border:"",size:"small","header-cell-style":{background:"#fafafa"}}},[n("el-table-column",{attrs:{prop:"fill_id",label:"成交ID",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",{staticClass:"id-text",attrs:{title:a.fill_id}},[t._v(t._s(t.truncateId(a.fill_id)))])]}}])}),n("el-table-column",{attrs:{prop:"order_id",label:"订单ID",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",{staticClass:"id-text",attrs:{title:a.order_id}},[t._v(t._s(t.truncateId(a.order_id)))])]}}])}),n("el-table-column",{attrs:{prop:"symbol",label:"标的",width:"110"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",{staticStyle:{"font-weight":"600"}},[t._v(t._s(a.symbol))])]}}])}),n("el-table-column",{attrs:{prop:"exchange",label:"交易所",width:"100",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[a.exchange?n("el-tag",{attrs:{size:"mini",effect:"plain"}},[t._v(t._s((a.exchange||"").toUpperCase()))]):n("span",{staticClass:"text-muted"},[t._v("-")])]}}])}),n("el-table-column",{attrs:{prop:"side",label:"方向",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-tag",{attrs:{type:t.isBuy(a)?"success":"danger",size:"mini",effect:"dark"}},[t._v(" "+t._s(t.isBuy(a)?"买入":"卖出")+" ")])]}}])}),n("el-table-column",{attrs:{prop:"trade_type",label:"开/平仓",width:"80",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("el-tag",{attrs:{type:t.tradeTypeTag(a.trade_type),size:"mini",effect:"plain"}},[t._v(" "+t._s(t.tradeTypeLabel(a.trade_type))+" ")])]}}])}),n("el-table-column",{attrs:{prop:"price",label:"成交价",width:"120",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(t._s(t.formatPrice(n.price)))]}}])}),n("el-table-column",{attrs:{prop:"quantity",label:"成交量",width:"110",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(t._s(t.formatNum(n.quantity)))]}}])}),n("el-table-column",{attrs:{label:"成交金额",width:"130",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.row;return[n("span",{staticStyle:{"font-weight":"500"}},[t._v(t._s(t.formatMoney(a.value||a.quantity*a.price)))])]}}])}),n("el-table-column",{attrs:{prop:"fee",label:"手续费",width:"100",align:"right"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(t._s(t.formatNum(n.fee)))]}}])}),n("el-table-column",{attrs:{prop:"created_at",label:"成交时间","min-width":"170"},scopedSlots:t._u([{key:"default",fn:function(e){var n=e.row;return[t._v(t._s(t.formatTime(n.filled_at||n.created_at)))]}}])})],1),t.loading||0!==t.filteredList.length?t._e():n("el-empty",{attrs:{description:"暂无成交记录"}}),t.total>0?n("div",{staticClass:"pagination-wrap"},[n("span",{staticClass:"total-tip"},[t._v("共 "+t._s(t.total)+" 条")]),n("el-pagination",{attrs:{background:"",layout:"prev, pager, next, sizes",total:t.total,"page-sizes":[10,20,50,100],"page-size":t.pageSize,"current-page":t.currentPage},on:{"update:pageSize":function(e){t.pageSize=e},"update:page-size":function(e){t.pageSize=e},"update:currentPage":function(e){t.currentPage=e},"update:current-page":function(e){t.currentPage=e},"size-change":t.fetchData,"current-change":t.fetchData}})],1):t._e()],1)],1)},r=[],i=(n("0643"),n("4e3e"),n("8012")),s=n("50fc"),o={name:"FillList",data(){return{loading:!1,list:[],total:0,currentPage:1,pageSize:20,where:{symbol:"",side:"",trade_type:"",exchange:"",dateRange:null,order_id:""},accountOptions:[]}},computed:{exchangeOptions(){const t=new Set;return this.list.forEach(e=>{e.exchange&&t.add(e.exchange)}),this.accountOptions.forEach(e=>{e.exchange&&t.add(e.exchange)}),Array.from(t).sort()},filteredList(){return this.list},stats(){let t=0,e=0,n=0,a=0;return this.filteredList.forEach(r=>{t+=parseFloat(r.fee||0),e+=parseFloat(r.value||r.quantity*r.price||0),this.isBuy(r)?n++:a++}),{totalFee:t,totalValue:e,buyCount:n,sellCount:a}}},mounted(){this.$route.query.order_id&&(this.where.order_id=this.$route.query.order_id),this.fetchData(),this.fetchAccounts()},methods:{isBuy(t){return"BUY"===(t.side||"").toUpperCase()},tradeTypeLabel(t){return{OPEN:"开仓",CLOSE:"平仓",ADD:"加仓",REDUCE:"减仓"}[t]||t||"开仓"},tradeTypeTag(t){return{OPEN:"",CLOSE:"danger",ADD:"warning",REDUCE:"info"}[t]||""},formatPrice(t){if(null==t||""===t)return"-";const e=Number(t);return isNaN(e)?t:e>=1e3?e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2}):e>=1?e.toLocaleString("en-US",{minimumFractionDigits:4,maximumFractionDigits:4}):e.toLocaleString("en-US",{minimumFractionDigits:6,maximumFractionDigits:8})},formatNum(t){if(null==t||""===t)return"0";const e=parseFloat(t);return isNaN(e)?"0":e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:6})},formatMoney(t){if(null==t||""===t)return"0.00";const e=Number(t);return isNaN(e)?"0.00":e.toLocaleString("en-US",{minimumFractionDigits:2,maximumFractionDigits:2})},formatTime(t){if(!t)return"-";const e=new Date(t);if(isNaN(e.getTime()))return String(t).replace("T"," ").substring(0,19);const n=t=>String(t).padStart(2,"0");return`${e.getFullYear()}-${n(e.getMonth()+1)}-${n(e.getDate())} ${n(e.getHours())}:${n(e.getMinutes())}:${n(e.getSeconds())}`},truncateId(t){if(!t)return"-";const e=String(t);return e.length<=12?e:e.slice(0,8)+"..."+e.slice(-4)},onSearch(){this.currentPage=1,this.fetchData()},reset(){this.where={symbol:"",side:"",trade_type:"",exchange:"",dateRange:null,order_id:""},this.currentPage=1,this.fetchData()},async fetchAccounts(){try{const t=await Object(s["n"])({status:1});this.accountOptions=t.data.data||t.data||[]}catch(t){}},async fetchData(){this.loading=!0;try{const t={limit:this.pageSize,offset:(this.currentPage-1)*this.pageSize};this.where.symbol&&(t.symbol=this.where.symbol),this.where.side&&(t.side=this.where.side),this.where.trade_type&&(t.trade_type=this.where.trade_type),this.where.order_id&&(t.order_id=this.where.order_id),this.where.exchange&&(t.exchange=this.where.exchange),this.where.dateRange&&2===this.where.dateRange.length&&(t.start_time=this.where.dateRange[0]+"T00:00:00",t.end_time=this.where.dateRange[1]+"T23:59:59");const e=await Object(i["d"])(t),n=e.data;this.list=n.data||[],this.total=null!=n.total?n.total:this.list.length}catch(e){var t;this.$message.error((null===(t=e.response)||void 0===t||null===(t=t.data)||void 0===t?void 0:t.detail)||"获取成交记录失败"),this.list=[],this.total=0}finally{this.loading=!1}}}},l=o,u=(n("ae44"),n("2877")),c=Object(u["a"])(l,a,r,!1,null,"cd362110",null);e["default"]=c.exports},ae44:function(t,e,n){"use strict";n("6cc8")}}]);