service_name: ironbull
log_level: INFO
log_structured: false

# Service Ports
signal_hub_port: 8001
risk_control_port: 8002
execution_dispatcher_port: 8003
crypto_node_port: 9101
mt5_node_port: 9102
backtest_port: 8030

# MySQL Database (v1 Facts Layer)
db_host: 127.0.0.1
db_port: 3306
db_user: root
db_password: "root123456"
db_name: ironbull
db_charset: utf8mb4
db_pool_size: 5
db_max_overflow: 10
db_pool_timeout: 30
db_pool_recycle: 3600

# Redis (v1 Phase 3 - Queue)
redis_host: 127.0.0.1
redis_port: 6379
redis_db: 0
redis_password: ""
redis_pool_size: 10

# Data Provider (v1 Phase 5)
data_source: mock                 # 数据源: mock / live
default_exchange: binance         # 默认交易所: binance / okx
data_cache_enabled: true          # 是否启用数据缓存
data_provider_url: http://127.0.0.1:8010  # data-provider 服务地址
signal_monitor_url: http://127.0.0.1:8020  # signal-monitor 状态代理（管理后台用）

# Trading (v1 Phase 6)
trading_mode: paper               # 交易模式: paper(模拟) / live(真实)

# Risk Control (v1 Phase 4)
risk_min_balance: 100.0           # 最小可用余额
risk_max_positions: 10            # 最大持仓数量
risk_max_position_value: 50000.0  # 单仓最大价值
risk_daily_trade_limit: 100       # 每日交易次数上限
risk_daily_loss_limit: 1000.0     # 每日亏损上限
risk_max_consecutive_losses: 5    # 连续亏损次数上限
risk_loss_cooldown_minutes: 30    # 连续亏损后冷却时间（分钟）
risk_trade_cooldown_seconds: 0    # 两次交易间隔（秒，0=不限制）

# Telegram Notification
telegram_bot_token: "8520192492:AAETCm1SytHYmt7ILAEU9lkqoSWHSXHMq8U"
telegram_chat_id: "8165570703"

# Exchange API (用于真实交易)
exchange_name: binance              # 交易所: binance / okx
exchange_api_key: "x0WJZRj8d4xW5xb6OJvQvthEN5GUF8zEs1Zxx0DIxdv60PMB0C5PoWbQA1c4BIw5"
exchange_api_secret: "LRi9fH3mpBjI4MEaoVTfOoprSnSOwDLwxGU8sxvPL6W6FChbNHXURRMmphrNbUuj"
exchange_passphrase: ""             # API Passphrase (OKX 需要)
exchange_sandbox: false             # 真实交易（注意！）
exchange_market_type: future        # 市场类型: spot(现货) / future(合约)

# Execution Node Authentication
node_auth_secret: "test-secret-2026"   # 中心⇄节点共享密钥，用于 X-Center-Token

# Auto Trading
auto_trade_enabled: false           # 是否启用自动交易
auto_trade_mode: notify_only        # 模式: notify_only / confirm_each / auto_execute
auto_trade_max_amount: 200.0        # 单笔最大金额 (USDT) - 合约最小100
auto_trade_max_daily: 10            # 每日最大交易次数
auto_trade_max_positions: 3         # 最大同时持仓数
auto_trade_min_confidence: 70       # 最低置信度要求

# Monitor Daemon 监控告警
monitor_enabled: true                # 是否启用监控守护
monitor_interval: 60                 # 巡检间隔（秒）
monitor_services:                    # 要巡检的服务列表
  - name: data-api
    url: http://127.0.0.1:8026/health
  - name: merchant-api
    url: http://127.0.0.1:8010/health
  - name: signal-monitor
    url: http://127.0.0.1:8020/health
monitor_node_timeout: 180            # 节点心跳超时（秒）
monitor_alert_cooldown: 300          # 同一告警去重间隔（秒）
