# Old1 vs å½“å‰å®ç°ï¼šä¿¡å·ç”Ÿæˆé€»è¾‘å¯¹æ¯”

## ğŸ” å…³é”®å·®å¼‚å‘ç°

### Old1 çš„ä¿¡å·ç”Ÿæˆé€»è¾‘

Old1 åœ¨ `backtest_engine.py:1537` è¡Œå¼€å§‹æœ‰å®Œæ•´çš„ä¿¡å·ç”Ÿæˆæµç¨‹ï¼š

1. **ç»“æ„æ£€æµ‹ï¼ˆBOS/CHoCHï¼‰**
   ```python
   # æ£€æµ‹ç»“æ„çªç ´
   up_break = bar["h"] > swing_high["price"]  # çªç ´é«˜ç‚¹
   down_break = bar["l"] < swing_low["price"]  # çªç ´ä½ç‚¹
   
   bos = None
   if up_break:
       bos = "BUY"  # å‘ä¸Šçªç ´ = çœ‹æ¶¨ç»“æ„
   elif down_break:
       bos = "SELL"  # å‘ä¸‹çªç ´ = çœ‹è·Œç»“æ„
   
   choch = None  # ç»“æ„åè½¬
   if trend == "bull" and down_break:
       choch = "SELL"
   elif trend == "bear" and up_break:
       choch = "BUY"
   ```

2. **æ–¹å‘ç¡®å®š**
   ```python
   side = None
   if structure == "bos":
       side = bos
   elif structure == "choch":
       side = choch
   else:  # "both"
       side = bos or choch  # ä¼˜å…ˆBOSï¼Œå…¶æ¬¡CHoCH
   ```

3. **æ–æ³¢é‚£å¥‘å›æ’¤ä½å…¥åœº**
   - åœ¨ç¡®å®šæ–¹å‘åï¼Œåœ¨æ–æ³¢é‚£å¥‘å›æ’¤ä½å…¥åœº
   - æ”¯æŒå¤šä¸ªå›æ’¤ä½ï¼ˆ0.5, 0.618, 0.705ï¼‰
   - é€‰æ‹©æœ€ä¼˜ç›ˆäºæ¯”çš„å›æ’¤ä½

### å½“å‰å®ç°çš„ä¿¡å·ç”Ÿæˆé€»è¾‘

å½“å‰å®ç°**åªå…³æ³¨æ–æ³¢é‚£å¥‘å›æ’¤ä½**ï¼š

1. **è¶‹åŠ¿åˆ¤æ–­**ï¼ˆåŸºäºæ‘†åŠ¨ç‚¹ï¼‰
   ```python
   trend = self._get_trend(candles, swing_highs, swing_lows)
   # åªåˆ¤æ–­è¶‹åŠ¿æ–¹å‘ï¼Œä¸æ£€æµ‹ç»“æ„çªç ´
   ```

2. **æ–æ³¢é‚£å¥‘å›æ’¤ä½å…¥åœº**
   - ç›´æ¥åœ¨å½“å‰ä»·æ ¼æ˜¯å¦åœ¨æ–æ³¢é‚£å¥‘å›æ’¤ä½æ—¶å…¥åœº
   - æ²¡æœ‰BOS/CHoCHé€»è¾‘

## ğŸ“Š å½±å“åˆ†æ

### äº¤æ˜“æ¬¡æ•°å·®å¼‚

| é¡¹ç›® | Old1 | å½“å‰å®ç° | å·®å¼‚ |
|------|------|---------|------|
| **ä¿¡å·æ¥æº** | BOS + CHoCH + æ–æ³¢é‚£å¥‘ | ä»…æ–æ³¢é‚£å¥‘ | **å°‘2ä¸ªä¿¡å·æº** |
| **äº¤æ˜“æ¬¡æ•°** | 618ç¬” | 215ç¬” | **-403ç¬” (-65%)** |

### ä¸ºä»€ä¹ˆOld1äº¤æ˜“æ›´å¤šï¼Ÿ

1. **BOSä¿¡å·**ï¼šæ¯æ¬¡ä»·æ ¼çªç ´æ‘†åŠ¨é«˜ç‚¹/ä½ç‚¹æ—¶ï¼Œéƒ½ä¼šç”Ÿæˆä¿¡å·
2. **CHoCHä¿¡å·**ï¼šè¶‹åŠ¿åè½¬æ—¶ä¹Ÿä¼šç”Ÿæˆä¿¡å·
3. **æ–æ³¢é‚£å¥‘å›æ’¤**ï¼šåœ¨å›æ’¤ä½å…¥åœº

**å½“å‰å®ç°åªæœ‰ç¬¬3ç‚¹**ï¼Œæ‰€ä»¥äº¤æ˜“æ¬¡æ•°å°‘å¾ˆå¤šã€‚

## âš ï¸ å…³é”®å‘ç°

### Old1 çš„å®Œæ•´æµç¨‹

```
1. æ£€æµ‹ç»“æ„çªç ´ï¼ˆBOS/CHoCHï¼‰
   â†“
2. ç¡®å®šäº¤æ˜“æ–¹å‘ï¼ˆæ ¹æ®structureå‚æ•°ï¼‰
   â†“
3. åœ¨æ–æ³¢é‚£å¥‘å›æ’¤ä½å…¥åœº
   â†“
4. å›è¸©ç¡®è®¤ï¼ˆå¦‚æœå¯ç”¨ï¼‰
   â†“
5. æˆäº¤
```

### å½“å‰å®ç°çš„æµç¨‹

```
1. åˆ¤æ–­è¶‹åŠ¿ï¼ˆåŸºäºæ‘†åŠ¨ç‚¹ï¼‰
   â†“
2. åœ¨æ–æ³¢é‚£å¥‘å›æ’¤ä½å…¥åœºï¼ˆå¦‚æœä»·æ ¼æ­£å¥½åœ¨å›æ’¤ä½ï¼‰
   â†“
3. å›è¸©ç¡®è®¤ï¼ˆå¦‚æœå¯ç”¨ï¼‰
   â†“
4. æˆäº¤
```

**ç¼ºå¤±ï¼šç»“æ„çªç ´æ£€æµ‹ï¼ˆBOS/CHoCHï¼‰**

## ğŸ”§ ä¿®å¤å»ºè®®

å¦‚æœè¦å®Œå…¨å¯¹é½old1çš„é€»è¾‘ï¼Œéœ€è¦æ·»åŠ ï¼š

1. **BOSæ£€æµ‹**ï¼šä»·æ ¼çªç ´æ‘†åŠ¨é«˜ç‚¹/ä½ç‚¹
2. **CHoCHæ£€æµ‹**ï¼šè¶‹åŠ¿åè½¬
3. **ç»“æ„å‚æ•°**ï¼š`structure = "both"`ï¼ˆé»˜è®¤ï¼Œæ”¯æŒBOSå’ŒCHoCHï¼‰

ä½†è¿™å¯èƒ½ä¼šå¤§å¹…å¢åŠ äº¤æ˜“æ¬¡æ•°ï¼Œéœ€è¦è¯„ä¼°æ˜¯å¦ç¬¦åˆé¢„æœŸã€‚

## ğŸ“ æ€»ç»“

**æ ¸å¿ƒå·®å¼‚ï¼š**
- âœ… Old1ï¼šBOS + CHoCH + æ–æ³¢é‚£å¥‘å›æ’¤ï¼ˆ3ä¸ªä¿¡å·æºï¼‰
- âŒ å½“å‰ï¼šä»…æ–æ³¢é‚£å¥‘å›æ’¤ï¼ˆ1ä¸ªä¿¡å·æºï¼‰

**ç»“æœï¼š**
- Old1äº¤æ˜“æ¬¡æ•°ï¼š618ç¬”
- å½“å‰å®ç°ï¼š215ç¬”ï¼ˆå°‘65%ï¼‰

**å»ºè®®ï¼š**
- å¦‚æœç›®æ ‡æ˜¯å®Œå…¨å¯¹é½old1ï¼Œéœ€è¦æ·»åŠ BOS/CHoCHé€»è¾‘
- å¦‚æœç›®æ ‡æ˜¯ä¿æŒå½“å‰é€»è¾‘ï¼Œé‚£ä¹ˆäº¤æ˜“æ¬¡æ•°å·®å¼‚æ˜¯æ­£å¸¸çš„
